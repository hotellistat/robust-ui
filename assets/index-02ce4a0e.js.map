{"version":3,"file":"index-02ce4a0e.js","sources":["../../src/components/DatePicker/index.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport RobustPopper from '../Popper';\nimport RobustCalendar from '../Calendar/index.vue';\nimport RobustInputWrapper from '../InputWrapper/index.vue';\nimport { format } from 'date-fns';\nimport { PhCaretDown, PhCalendar } from '@dnlsndr/vue-phosphor-icons';\nimport { computed, ref, toRefs, PropType, readonly } from 'vue';\nimport { onClickOutside } from '@vueuse/core';\n\nconst props = defineProps({\n  title: {\n    type: String,\n    default: undefined,\n  },\n  hint: {\n    type: String,\n    default: undefined,\n  },\n  modelValue: {\n    type: Object as PropType<Date>,\n    default: undefined,\n  },\n  error: {\n    type: String,\n    default: undefined,\n  },\n  class: {\n    type: String,\n    default: 'bg-gray-100 dark:bg-gray-700',\n  },\n  condensed: {\n    type: Boolean,\n    default: false,\n  },\n  readonly: {\n    type: Boolean,\n    default: false,\n  },\n  dark: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits(['blur', 'update:modelValue', 'change', 'blur']);\n\nconst { modelValue } = toRefs(props);\nconst open = ref(false);\nconst popperRef = ref();\nconst inputWrapperRef = ref();\n\nonClickOutside(popperRef, (event) => {\n  if (open.value) {\n    if (inputWrapperRef.value.wrapperRef.contains(event.target)) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    closeDropdown();\n    emit('blur');\n  }\n});\n\nconst computedValue = computed<Date>({\n  get() {\n    return modelValue?.value ? modelValue.value : new Date();\n  },\n  set(value) {\n    open.value = false;\n    emit('update:modelValue', value);\n    emit('change', value);\n    emit('blur');\n  },\n});\n\nconst displayDate = computed(() => {\n  if (!computedValue.value) {\n    return 'Select date';\n  }\n\n  const realDate = computedValue.value;\n  try {\n    return realDate ? format(realDate, 'P') : 'Unknown';\n  } catch (e) {\n    return undefined;\n  }\n});\n\nfunction closeDropdown() {\n  if (open.value === true) {\n    open.value = false;\n    emit('blur');\n  }\n}\n</script>\n\n<template>\n  <RobustInputWrapper\n    ref=\"inputWrapperRef\"\n    v-slot=\"slotProps\"\n    :title=\"title\"\n    :hint=\"hint\"\n    :error=\"error\"\n    :class=\"$props.class\"\n    :readonly=\"readonly\"\n    :condensed=\"condensed\"\n    @click.stop=\"open = !open\"\n  >\n    <div\n      class=\"flex h-full items-center pr-2 text-gray-400\"\n      :class=\"[condensed ? 'pl-2' : 'pl-3']\"\n    >\n      <PhCalendar size=\"20\" />\n    </div>\n    <div\n      :id=\"slotProps.cuid\"\n      ref=\"select\"\n      class=\"flex h-full w-full cursor-default items-center bg-transparent pl-2 text-current outline-none\"\n      v-bind=\"$attrs\"\n    >\n      <div class=\"min-w-0 truncate tabular-nums\">{{ displayDate }}</div>\n    </div>\n\n    <div\n      class=\"flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500\"\n      :class=\"[condensed ? 'pl-2' : 'pl-3']\"\n    >\n      <PhCaretDown\n        :size=\"14\"\n        weight=\"bold\"\n        class=\"transition-transform duration-200\"\n        :class=\"{ 'rotate-180 transform': open }\"\n      />\n    </div>\n  </RobustInputWrapper>\n  <RobustPopper\n    v-if=\"inputWrapperRef?.wrapperRef\"\n    ref=\"popperRef\"\n    v-model:open=\"open\"\n    class=\"z-[100] origin-top-left\"\n    :append-to=\"inputWrapperRef?.wrapperRef\"\n    :options=\"{\n      placement: 'bottom-start',\n    }\"\n  >\n    <RobustCalendar v-model=\"computedValue\" />\n  </RobustPopper>\n</template>\n"],"names":["modelValue","toRefs","props","open","ref","popperRef","inputWrapperRef","onClickOutside","event","closeDropdown","emit","computedValue","computed","value","displayDate","realDate","format"],"mappings":"w2BA8CM,CAAE,WAAAA,CAAA,EAAeC,EAAOC,CAAK,EAC7BC,EAAOC,EAAI,EAAK,EAChBC,EAAYD,IACZE,EAAkBF,IAETG,EAAAF,EAAYG,GAAU,CAC/BL,EAAK,QACHG,EAAgB,MAAM,WAAW,SAASE,EAAM,MAAM,IACxDA,EAAM,gBAAgB,EACtBA,EAAM,eAAe,GAETC,IACdC,EAAK,MAAM,EACb,CACD,EAED,MAAMC,EAAgBC,EAAe,CACnC,KAAM,CACJ,OAAOZ,GAAA,MAAAA,EAAY,MAAQA,EAAW,MAAQ,IAAI,IACpD,EACA,IAAIa,EAAO,CACTV,EAAK,MAAQ,GACbO,EAAK,oBAAqBG,CAAK,EAC/BH,EAAK,SAAUG,CAAK,EACpBH,EAAK,MAAM,CACb,CAAA,CACD,EAEKI,EAAcF,EAAS,IAAM,CAC7B,GAAA,CAACD,EAAc,MACV,MAAA,cAGT,MAAMI,EAAWJ,EAAc,MAC3B,GAAA,CACF,OAAOI,EAAWC,EAAOD,EAAU,GAAG,EAAI,gBAEnC,MACT,CAAA,CACD,EAED,SAASN,GAAgB,CACnBN,EAAK,QAAU,KACjBA,EAAK,MAAQ,GACbO,EAAK,MAAM,EAEf"}