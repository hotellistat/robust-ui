import{d as nt,t as it,l as P,a as W,p as be,q as ot,K as at,o as T,f as F,e as L,x as O,r as ke,n as J,u as b,C as Le,F as ue,s as he,v as ne,k as ct,A as Ae,M as Ie,g as lt}from"./vue.esm-bundler.33188a4f.js";import{S as ze}from"./index.60f6c08f.js";import{v as ut,V as ht,z as dt,S as ft,f as pt,g as gt}from"./vue-phosphor-icons.9c01704a.js";import{_ as mt}from"./index.7f9d26e3.js";import{_ as Ce}from"./index.e1074d21.js";import{_ as vt}from"./index.acceedd1.js";import{w as yt}from"./index.93394147.js";function j(t){return Array.isArray?Array.isArray(t):Ve(t)==="[object Array]"}const xt=1/0;function _t(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-xt?"-0":e}function Mt(t){return t==null?"":_t(t)}function V(t){return typeof t=="string"}function Te(t){return typeof t=="number"}function St(t){return t===!0||t===!1||wt(t)&&Ve(t)=="[object Boolean]"}function Fe(t){return typeof t=="object"}function wt(t){return Fe(t)&&t!==null}function C(t){return t!=null}function de(t){return!t.trim().length}function Ve(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Et="Incorrect 'index' type",bt=t=>`Invalid value for key ${t}`,kt=t=>`Pattern length exceeds max of ${t}.`,Lt=t=>`Missing ${t} property in key`,At=t=>`Property 'weight' in key '${t}' must be a positive integer`,Oe=Object.prototype.hasOwnProperty;class It{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let i=je(n);s+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function je(t){let e=null,s=null,n=null,i=1,r=null;if(V(t)||j(t))n=t,e=Re(t),s=fe(t);else{if(!Oe.call(t,"name"))throw new Error(Lt("name"));const o=t.name;if(n=o,Oe.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(At(o));e=Re(o),s=fe(o),r=t.getFn}return{path:e,id:s,weight:i,src:n,getFn:r}}function Re(t){return j(t)?t:t.split(".")}function fe(t){return j(t)?t.join("."):t}function zt(t,e){let s=[],n=!1;const i=(r,o,a)=>{if(!!C(r))if(!o[a])s.push(r);else{let c=o[a];const h=r[c];if(!C(h))return;if(a===o.length-1&&(V(h)||Te(h)||St(h)))s.push(Mt(h));else if(j(h)){n=!0;for(let d=0,g=h.length;d<g;d+=1)i(h[d],o,a+1)}else o.length&&i(h,o,a+1)}};return i(t,V(e)?e.split("."):e,0),n?s:s[0]}const Ct={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ot={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Rt={location:0,threshold:.6,distance:100},$t={useExtendedSearch:!1,getFn:zt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...Ot,...Ct,...Rt,...$t};const Nt=/[^ ]+/g;function Pt(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(i){const r=i.match(Nt).length;if(s.has(r))return s.get(r);const o=1/Math.pow(r,.5*t),a=parseFloat(Math.round(o*n)/n);return s.set(r,a),a},clear(){s.clear()}}}class xe{constructor({getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){this.norm=Pt(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,V(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();V(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!C(e)||de(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((i,r)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(!!C(o)){if(j(o)){let a=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:h,value:d}=c.pop();if(!!C(d))if(V(d)&&!de(d)){let g={v:d,i:h,n:this.norm.get(d)};a.push(g)}else j(d)&&d.forEach((g,v)=>{c.push({nestedArrIndex:v,value:g})})}n.$[r]=a}else if(V(o)&&!de(o)){let a={v:o,n:this.norm.get(o)};n.$[r]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function De(t,e,{getFn:s=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const i=new xe({getFn:s,fieldNormWeight:n});return i.setKeys(t.map(je)),i.setSources(e),i.create(),i}function Tt(t,{getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const{keys:n,records:i}=t,r=new xe({getFn:e,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r}function ie(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:i=p.distance,ignoreLocation:r=p.ignoreLocation}={}){const o=e/t.length;if(r)return o;const a=Math.abs(n-s);return i?o+a/i:a?1:o}function Ft(t=[],e=p.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let o=t.length;r<o;r+=1){let a=t[r];a&&n===-1?n=r:!a&&n!==-1&&(i=r-1,i-n+1>=e&&s.push([n,i]),n=-1)}return t[r-1]&&r-n>=e&&s.push([n,r-1]),s}const G=32;function Vt(t,e,s,{location:n=p.location,distance:i=p.distance,threshold:r=p.threshold,findAllMatches:o=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,includeMatches:c=p.includeMatches,ignoreLocation:h=p.ignoreLocation}={}){if(e.length>G)throw new Error(kt(G));const d=e.length,g=t.length,v=Math.max(0,Math.min(n,g));let y=r,_=v;const A=a>1||c,E=A?Array(g):[];let N;for(;(N=t.indexOf(e,_))>-1;){let I=ie(e,{currentLocation:N,expectedLocation:v,distance:i,ignoreLocation:h});if(y=Math.min(I,y),_=N+d,A){let $=0;for(;$<d;)E[N+$]=1,$+=1}}_=-1;let D=[],R=1,B=d+g;const Z=1<<d-1;for(let I=0;I<d;I+=1){let $=0,k=B;for(;$<k;)ie(e,{errors:I,currentLocation:v+k,expectedLocation:v,distance:i,ignoreLocation:h})<=y?$=k:B=k,k=Math.floor((B-$)/2+$);B=k;let ae=Math.max(1,v-k+1),S=o?g:Math.min(v+k,g)+d,Y=Array(S+2);Y[S+1]=(1<<I)-1;for(let z=S;z>=ae;z-=1){let q=z-1,ee=s[t.charAt(q)];if(A&&(E[q]=+!!ee),Y[z]=(Y[z+1]<<1|1)&ee,I&&(Y[z]|=(D[z+1]|D[z])<<1|1|D[z+1]),Y[z]&Z&&(R=ie(e,{errors:I,currentLocation:q,expectedLocation:v,distance:i,ignoreLocation:h}),R<=y)){if(y=R,_=q,_<=v)break;ae=Math.max(1,2*v-_)}}if(ie(e,{errors:I+1,currentLocation:v,expectedLocation:v,distance:i,ignoreLocation:h})>y)break;D=Y}const K={isMatch:_>=0,score:Math.max(.001,R)};if(A){const I=Ft(E,a);I.length?c&&(K.indices=I):K.isMatch=!1}return K}function jt(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const i=t.charAt(s);e[i]=(e[i]||0)|1<<n-s-1}return e}class Ke{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:i=p.distance,includeMatches:r=p.includeMatches,findAllMatches:o=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,isCaseSensitive:c=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:h},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(v,y)=>{this.chunks.push({pattern:v,alphabet:jt(v),startIndex:y})},g=this.pattern.length;if(g>G){let v=0;const y=g%G,_=g-y;for(;v<_;)d(this.pattern.substr(v,G),v),v+=G;if(y){const A=g-G;d(this.pattern.substr(A),A)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let _={isMatch:!0,score:0};return n&&(_.indices=[[0,e.length-1]]),_}const{location:i,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,ignoreLocation:h}=this.options;let d=[],g=0,v=!1;this.chunks.forEach(({pattern:_,alphabet:A,startIndex:E})=>{const{isMatch:N,score:D,indices:R}=Vt(e,_,A,{location:i+E,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,includeMatches:n,ignoreLocation:h});N&&(v=!0),g+=D,N&&R&&(d=[...d,...R])});let y={isMatch:v,score:v?g/this.chunks.length:1};return v&&n&&(y.indices=d),y}}class U{constructor(e){this.pattern=e}static isMultiMatch(e){return $e(e,this.multiRegex)}static isSingleMatch(e){return $e(e,this.singleRegex)}search(){}}function $e(t,e){const s=t.match(e);return s?s[1]:null}class Dt extends U{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Kt extends U{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Ht extends U{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Wt extends U{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Ut extends U{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Bt extends U{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class He extends U{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:i=p.distance,includeMatches:r=p.includeMatches,findAllMatches:o=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,isCaseSensitive:c=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){super(e),this._bitapSearch=new Ke(e,{location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class We extends U{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const i=[],r=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+r,i.push([n,s-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const pe=[Dt,We,Ht,Wt,Bt,Ut,Kt,He],Ne=pe.length,Yt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Gt="|";function Xt(t,e={}){return t.split(Gt).map(s=>{let n=s.trim().split(Yt).filter(r=>r&&!!r.trim()),i=[];for(let r=0,o=n.length;r<o;r+=1){const a=n[r];let c=!1,h=-1;for(;!c&&++h<Ne;){const d=pe[h];let g=d.isMultiMatch(a);g&&(i.push(new d(g,e)),c=!0)}if(!c)for(h=-1;++h<Ne;){const d=pe[h];let g=d.isSingleMatch(a);if(g){i.push(new d(g,e));break}}}return i})}const qt=new Set([He.type,We.type]);class Qt{constructor(e,{isCaseSensitive:s=p.isCaseSensitive,includeMatches:n=p.includeMatches,minMatchCharLength:i=p.minMatchCharLength,ignoreLocation:r=p.ignoreLocation,findAllMatches:o=p.findAllMatches,location:a=p.location,threshold:c=p.threshold,distance:h=p.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:a,threshold:c,distance:h},this.pattern=s?e:e.toLowerCase(),this.query=Xt(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let r=0,o=[],a=0;for(let c=0,h=s.length;c<h;c+=1){const d=s[c];o.length=0,r=0;for(let g=0,v=d.length;g<v;g+=1){const y=d[g],{isMatch:_,indices:A,score:E}=y.search(e);if(_){if(r+=1,a+=E,n){const N=y.constructor.type;qt.has(N)?o=[...o,...A]:o.push(A)}}else{a=0,r=0,o.length=0;break}}if(r){let g={isMatch:!0,score:a/r};return n&&(g.indices=o),g}}return{isMatch:!1,score:1}}}const ge=[];function Jt(...t){ge.push(...t)}function me(t,e){for(let s=0,n=ge.length;s<n;s+=1){let i=ge[s];if(i.condition(t,e))return new i(t,e)}return new Ke(t,e)}const oe={AND:"$and",OR:"$or"},ve={PATH:"$path",PATTERN:"$val"},ye=t=>!!(t[oe.AND]||t[oe.OR]),Zt=t=>!!t[ve.PATH],es=t=>!j(t)&&Fe(t)&&!ye(t),Pe=t=>({[oe.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Ue(t,e,{auto:s=!0}={}){const n=i=>{let r=Object.keys(i);const o=Zt(i);if(!o&&r.length>1&&!ye(i))return n(Pe(i));if(es(i)){const c=o?i[ve.PATH]:r[0],h=o?i[ve.PATTERN]:i[c];if(!V(h))throw new Error(bt(c));const d={keyId:fe(c),pattern:h};return s&&(d.searcher=me(h,e)),d}let a={children:[],operator:r[0]};return r.forEach(c=>{const h=i[c];j(h)&&h.forEach(d=>{a.children.push(n(d))})}),a};return ye(t)||(t=Pe(t)),n(t)}function ts(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:i,norm:r,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:r))}),s.score=n})}function ss(t,e){const s=t.matches;e.matches=[],C(s)&&s.forEach(n=>{if(!C(n.indices)||!n.indices.length)return;const{indices:i,value:r}=n;let o={indices:i,value:r};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function rs(t,e){e.score=t.score}function ns(t,e,{includeMatches:s=p.includeMatches,includeScore:n=p.includeScore}={}){const i=[];return s&&i.push(ss),n&&i.push(rs),t.map(r=>{const{idx:o}=r,a={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(r,a)}),a})}class Q{constructor(e,s={},n){this.options={...p,...s},this.options.useExtendedSearch,this._keyStore=new It(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof xe))throw new Error(Et);this._myIndex=s||De(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!C(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,s.push(r))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:a}=this.options;let c=V(e)?V(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ts(c,{ignoreFieldNorm:a}),r&&c.sort(o),Te(s)&&s>-1&&(c=c.slice(0,s)),ns(c,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const s=me(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:r,i:o,n:a})=>{if(!C(r))return;const{isMatch:c,score:h,indices:d}=s.searchIn(r);c&&i.push({item:r,idx:o,matches:[{score:h,value:r,norm:a,indices:d}]})}),i}_searchLogical(e){const s=Ue(e,this.options),n=(a,c,h)=>{if(!a.children){const{keyId:g,searcher:v}=a,y=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(c,g),searcher:v});return y&&y.length?[{idx:h,item:c,matches:y}]:[]}const d=[];for(let g=0,v=a.children.length;g<v;g+=1){const y=a.children[g],_=n(y,c,h);if(_.length)d.push(..._);else if(a.operator===oe.AND)return[]}return d},i=this._myIndex.records,r={},o=[];return i.forEach(({$:a,i:c})=>{if(C(a)){let h=n(s,a,c);h.length&&(r[c]||(r[c]={idx:c,item:a,matches:[]},o.push(r[c])),h.forEach(({matches:d})=>{r[c].matches.push(...d)}))}}),o}_searchObjectList(e){const s=me(e,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach(({$:o,i:a})=>{if(!C(o))return;let c=[];n.forEach((h,d)=>{c.push(...this._findMatches({key:h,value:o[d],searcher:s}))}),c.length&&r.push({idx:a,item:o,matches:c})}),r}_findMatches({key:e,value:s,searcher:n}){if(!C(s))return[];let i=[];if(j(s))s.forEach(({v:r,i:o,n:a})=>{if(!C(r))return;const{isMatch:c,score:h,indices:d}=n.searchIn(r);c&&i.push({score:h,key:e,value:r,idx:o,norm:a,indices:d})});else{const{v:r,n:o}=s,{isMatch:a,score:c,indices:h}=n.searchIn(r);a&&i.push({score:c,key:e,value:r,norm:o,indices:h})}return i}}Q.version="6.6.2";Q.createIndex=De;Q.parseIndex=Tt;Q.config=p;Q.parseQuery=Ue;Jt(Qt);const is={class:"search-wrapper"},os={class:"rows-wrapper"},as=["onClick"],cs={class:"mr-auto overflow-hidden truncate break-words"},ls={class:"datatable-grid-columns flex flex-col gap-y-2 gap-x-2 p-4 sm:grid sm:items-center"},us={key:0,class:"w-full overflow-hidden break-words"},hs={key:0},ds={key:1,class:"loading dark:loading-dark h-6 w-full"},fs={class:"flex items-center justify-between py-2"},ps={class:"flex items-center gap-x-2"},gs={class:"flex gap-x-2"},ms={class:"flex gap-x-2"},vs={class:"flex items-center gap-x-2"},ys=L("div",null,"Rows per page:",-1),xs=nt({__name:"index",props:{data:{type:Array,required:!0},options:{type:Object,required:!0},loading:{type:Boolean,default:!1},headerClass:{type:String,default:()=>""}},emits:["update:page","update:rowsLimit","update:sort","update:search","update:selectedRows","update:resize"],setup(t,{emit:e}){var Se;const s=t;ct(l=>({"3e2f5828":b(z),"1dc40fbc":b(E)}));const n={serverSide:!1,rowsLimit:10,page:1,maxPage:1,rowsLimitOptions:[10,25,50],resize:!0,minColSize:100},{data:i,options:r,loading:o,headerClass:a}=it(s),c=P(),h=P(),d=W(()=>{var l;return(l=r.value.minColSize)!=null?l:n.minColSize}),g=W(()=>{var l;return{includeScore:!1,keys:(l=r.value.searchKeys)!=null?l:r.value.columns.map(f=>f.key),threshold:.3}}),v=W({get(){return y.value.length>0},set(l){l?y.value=R.value.map(f=>f[r.value.id]):y.value=[]}}),y=P([]),_=P(""),A=P((Se=r.value.rowsLimit)!=null?Se:n.rowsLimit),E=W({get(){return r.value.serverSide?r.value.rowsLimit:A.value},set(l){A.value=l}}),D=P((()=>{var f;return((f=r.value.rowsLimitOptions)!=null?f:n.rowsLimitOptions).map(u=>({value:u,title:`${u}`}))})()),R=W(()=>{if(o.value)return Array(E.value).fill({});if(r.value.serverSide)return i.value;const l=q();H(k.value);const u=(k.value-1)*E.value;return l.slice(u,u+E.value)}),B=()=>{var l;return r.value.serverSide?(l=r.value.maxPage)!=null?l:n.maxPage:Math.ceil(i.value.length/E.value)},Z=P(B()),K=W({get(){return r.value.serverSide?B():Z.value},set(l){Z.value=l}}),$=P((()=>!r.value.page||r.value.page>K.value?n.page:r.value.page)()),k=W({get(){return r.value.serverSide?r.value.page:$.value},set(l){$.value=l}}),S=P((()=>{const l=[];for(const f of r.value.columns)l.push({direction:0,...f});return l})()),X=P((()=>{const l=r.value.columns.map(f=>f.size);return l.unshift("2rem"),l})()),z=W(()=>X.value.map(f=>f!==void 0?`${f}`:"minmax(0, 1fr)").join(" ")),q=()=>{let l=Array.from(i.value);return _.value!==""&&(l=new Q(l,g.value).search(_.value).map(x=>x.item)),r.value.serverSide||(K.value=Math.ceil(l.length/E.value)),l.sort((u,x)=>{for(const m of S.value){if(m.direction===0)continue;const M=m.key;if(m.direction===-1)if(m.sort){const w=m.sort(u[M],x[M],"desc");if(w)return w}else{if(u[M]>x[M])return-1;if(u[M]<x[M])return 1}else if(m.direction===1)if(m.sort){const w=m.sort(u[M],x[M],"asc");if(w)return w}else{if(u[M]>x[M])return 1;if(u[M]<x[M])return-1}}})},ee=l=>{const f=S.value.findIndex(m=>m.key===l.key),u=S.value[f];if(u.direction===0||f===S.value.length-1)switch(u.direction){case 0:u.direction=1;break;case 1:u.direction=-1;break;default:u.direction=0}else u.direction=0;S.value.splice(f,1),u.direction?S.value.push(u):S.value.unshift(u);const x=S.value.filter(m=>m.direction!==0);e("update:sort",x)},Be=l=>{const f=S.value.findIndex(m=>m.key===l.key),u=S.value[f];switch(u.direction){case 0:u.direction=1;break;case 1:u.direction=-1;break;default:u.direction=0}S.value.splice(f,1),S.value=S.value.map(m=>({...m,direction:0})),S.value.push(u);const x=S.value.filter(m=>m.direction!==0);e("update:sort",x)},Ye=(l,f)=>{if(!o.value&&l.sortable!==!1)return f.shiftKey?ee(l):Be(l)},_e=l=>S.value.find(u=>u.key===l.key).direction,Ge=(l,f,u)=>Math.min(Math.max(l,f),u),H=(l,f=!0)=>{if(!o.value){if(r.value.serverSide){f&&e("update:page",l);return}k.value=Ge(l,1,K.value)}},Xe=()=>H(k.value+1),qe=()=>H(k.value-1),Qe=()=>H(1),Je=()=>r.value.serverSide?H(r.value.maxPage):H(1/0),Ze=l=>{E.value=l,H(k.value),e("update:rowsLimit",l)};yt(_,()=>{e("update:search",_.value)},{debounce:150}),be(K,()=>{H(k.value)}),be(y,()=>{e("update:selectedRows",y.value)});const Me=()=>{c.value.querySelectorAll(".table-column").forEach((u,x)=>{X.value[x+1]=u.clientWidth+"px"}),e("update:resize",X.value)},et=function(l,f,u,x){if(!r.value.resize)return;let m=0,M=0;const w=function(te){m=te.clientX,M=l.clientWidth,document.addEventListener("mousemove",we),document.addEventListener("mouseup",Ee),document.querySelector("body").classList.add("resizer-cursor"),document.querySelectorAll(".resizer").forEach(re=>re.classList.add("resizer-not-active")),f.classList.remove("resizer-not-active"),f.classList.add("resizing")},we=function(te){const le=te.clientX-m,se=M+le,re=x+1;X.value[re+1]=`minmax(${d.value}px, 1fr)`;const rt=Math.max(se,d.value);X.value[re]=`minmax(${d.value}px, ${rt}px)`},Ee=function(){Me(),document.removeEventListener("mousemove",we),document.removeEventListener("mouseup",Ee),document.querySelector("body").classList.remove("resizer-cursor"),document.querySelectorAll(".resizer").forEach(se=>se.classList.remove("resizer-not-active")),f.classList.remove("resizing")};u.addEventListener("mousedown",w)},tt=()=>{if(!r.value.resize)return;const l=c.value,f=l.querySelectorAll(".table-column"),u=l.querySelector(".rows-wrapper");f.forEach((x,m)=>{if(m<f.length-1){const M=x.querySelector(".resizer"),w=x.querySelector(".resizer-handle");M&&(M.style.height=`${u.clientHeight}px`),w&&(w.style.height=`${h.value.clientHeight}px`)}})},st=()=>{if(!r.value.resize)return;const l=c.value,f=l.querySelectorAll(".table-column"),u=l.querySelector(".rows-wrapper");f.forEach((x,m)=>{if(m<f.length-1){const M=document.createElement("div"),w=document.createElement("div");M.classList.add("resizer"),w.classList.add("resizer-handle"),w.style.height=`${h.value.clientHeight}px`,w.style.zIndex="2",M.style.height=`${u.clientHeight}px`,x.appendChild(w),x.appendChild(M),et(x,M,w,m)}}),Me()};let ce;return ot(()=>{st(),ce=new ResizeObserver(()=>tt()),ce.observe(c.value)}),at(()=>{ce.disconnect()}),(l,f)=>(T(),F("div",{ref_key:"table",ref:c,class:"flex flex-col gap-y-2 sm:gap-y-2"},[L("div",is,[O(vt,{modelValue:_.value,"onUpdate:modelValue":f[0]||(f[0]=u=>_.value=u),placeholder:"Search"},null,8,["modelValue"]),L("div",null,[ke(l.$slots,"filter")])]),L("div",os,[L("div",{ref_key:"header",ref:h,class:J(["datatable-grid-columns hidden select-none items-center gap-x-2 p-4 sm:grid",b(a)])},[O(Ce,{modelValue:b(v),"onUpdate:modelValue":f[1]||(f[1]=u=>Le(v)?v.value=u:null)},null,8,["modelValue"]),(T(!0),F(ue,null,he(b(r).columns,u=>{var x;return T(),F("div",{key:u.key,class:J(["relative table-column cursor-pointer",(x=u.class)!=null?x:""])},[L("div",{class:"flex items-center gap-x-2",onClick:m=>Ye(u,m)},[L("div",cs,ne(u.name),1),Ae(O(b(pt),{class:"text-gray-500",size:20},null,512),[[Ie,_e(u)===1]]),Ae(O(b(gt),{class:"text-gray-500",size:20},null,512),[[Ie,_e(u)===-1]])],8,as)],2)}),128))],2),O(ze,{class:"hidden sm:block"}),L("div",{class:J(["datatable-grid-rows",b(R).length?"":"datatable-grid-rows-empty"])},[(T(!0),F(ue,null,he(b(R),(u,x)=>(T(),F("div",{key:x,class:"flex flex-col justify-between"},[L("div",ls,[O(Ce,{modelValue:y.value,"onUpdate:modelValue":f[2]||(f[2]=m=>y.value=m),value:u[b(r).id]},null,8,["modelValue","value"]),(T(!0),F(ue,null,he(b(r).columns,m=>{var M,w;return T(),F("div",{key:m.key,class:J(["grid grid-cols-2 sm:flex",(M=m.class)!=null?M:""])},[L("div",{class:J(["block sm:hidden",(w=m.class)!=null?w:""])},ne(m.name),3),b(o)?(T(),F("div",ds)):(T(),F("div",us,[l.$slots[m.key]?lt("",!0):(T(),F("div",hs,ne(u[m.key]===void 0?"No data":u[m.key]),1)),ke(l.$slots,`${m.key}`,{data:u})]))],2)}),128))]),O(ze)]))),128))],2)]),L("div",fs,[L("div",ps,[L("div",gs,[O(b(ut),{size:24,onClick:Qe}),O(b(ht),{size:24,onClick:qe})]),L("div",null,ne(b(k)),1),L("div",ms,[O(b(dt),{size:24,onClick:Xe}),O(b(ft),{size:24,onClick:Je})])]),L("div",vs,[ys,O(mt,{modelValue:b(E),"onUpdate:modelValue":f[3]||(f[3]=u=>Le(E)?E.value=u:null),options:D.value,onChange:Ze},null,8,["modelValue","options"])])])],512))}});xs.__docgenInfo={exportName:"default",displayName:"DataTable",description:"",tags:{},props:[{name:"data",type:{name:"Record<string, unknown>[]"},required:!0},{name:"options",type:{name:"DataTableOptions"},required:!0},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"headerClass",type:{name:"string"},defaultValue:{func:!0,value:"() => ''"}}],events:[{name:"update:page"},{name:"update:rowsLimit"},{name:"update:sort"},{name:"update:search"},{name:"update:selectedRows"},{name:"update:resize"}],slots:[{name:"filter"},{name:"default",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"data",title:"binding"}]}]};export{xs as _};
//# sourceMappingURL=index.412b5cd0.js.map
