{"version":3,"file":"index.f9c4f2ab.js","sources":["../../src/components/TabsSwitch/index.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"root\"\n    class=\"transition-color text-shade-20 relative flex select-none items-center bg-gray-200 duration-100 ease-in-out dark:bg-gray-700\"\n    :class=\"[rounded ? 'rounded-full' : 'rounded-md']\"\n  >\n    <div\n      ref=\"highlighter\"\n      class=\"absolute top-0 bottom-0 z-0 bg-primary-500 transition-all duration-200 ease-in-out\"\n      :class=\"[rounded ? 'rounded-full' : 'rounded-md']\"\n      :style=\"{ left: backgroundXOffset + 'px', width: backgroundWidth + 'px' }\"\n    ></div>\n\n    <button\n      v-for=\"tab in tabs\"\n      :key=\"tab.value\"\n      :ref=\"registerTab\"\n      :data-value=\"tab.value\"\n      class=\"whitespace-no-wrap z-10 flex-1 flex-shrink-0 flex-grow self-stretch whitespace-nowrap px-4 transition-colors duration-200\"\n      :class=\"{ 'text-white': modelValue === tab.value }\"\n      @click=\"select($event, tab.value)\"\n    >\n      {{ tab.title }}\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { nextTick, onMounted, onUnmounted, PropType, ref, toRefs } from 'vue'\n\nexport interface Tab {\n  title: string\n  value: string\n}\n\nconst props = defineProps({\n  tabs: {\n    type: Array as PropType<Tab[]>,\n    required: true,\n  },\n  rounded: {\n    type: Boolean,\n    default: false,\n  },\n  modelValue: {\n    type: String,\n    required: true,\n  },\n})\n\nconst emit = defineEmits(['update:modelValue'])\n\nconst registeredTabs = ref<HTMLElement[]>([])\n\nconst propRefs = toRefs(props)\n\nconst registerTab = (el: HTMLElement) => {\n  registeredTabs.value?.push(el)\n}\n\nconst backgroundXOffset = ref(0)\nconst backgroundWidth = ref(0)\n\nconst showBackground = ref(false)\n\nconst root = ref<HTMLElement>()\nconst highlighter = ref<HTMLElement>()\n\nconst resizeObserver: ResizeObserver = new ResizeObserver(() => {\n  const activeElement = getActiveElement()\n\n  if (activeElement) {\n    updateHighlighter(activeElement)\n  }\n})\n\nonMounted(() => {\n  if (root.value) {\n    resizeObserver.observe(root.value)\n  }\n  nextTick(() => {\n    showBackground.value = true\n  })\n})\n\nonUnmounted(() => {\n  if (root.value) {\n    resizeObserver.unobserve(root.value)\n  }\n})\n\nconst getActiveElement = () => {\n  return registeredTabs.value.find(\n    (tab) => tab.dataset.value === propRefs.modelValue.value\n  )\n}\n\nconst updateHighlighter = (element: HTMLElement) => {\n  // Fetch the container box of the root ref\n  const containerBox = root.value?.getBoundingClientRect()\n\n  if (!containerBox) {\n    throw new Error('no container box specified')\n  }\n\n  // Fetch the container box of the currently selected tab ref\n  const selectedTabBox = element.getBoundingClientRect()\n\n  // Calculate the difference between the root and the selectedTab to get the relative offset of the selectedTab to the root\n  const relativeOffset = {\n    x: selectedTabBox.x - containerBox.x,\n    y: selectedTabBox.y - containerBox.y,\n  }\n\n  // Update the background position and size to the relative offset and size\n  backgroundXOffset.value = relativeOffset.x\n  backgroundWidth.value = selectedTabBox.width\n}\n\nconst select = (event: MouseEvent, value: string) => {\n  // emit a value update event and change the background size and position to the newly selected tab\n  emit('update:modelValue', value)\n  if (event.target && event.target instanceof HTMLElement) {\n    updateHighlighter(event.target)\n  }\n}\n\nconst activeElement = getActiveElement()\n\nif (activeElement) {\n  updateHighlighter(activeElement)\n}\n</script>\n"],"names":["registeredTabs","ref","propRefs","toRefs","props","registerTab","el","_a","backgroundXOffset","backgroundWidth","showBackground","root","highlighter","resizeObserver","activeElement","getActiveElement","updateHighlighter","onMounted","nextTick","onUnmounted","tab","element","containerBox","selectedTabBox","relativeOffset","select","event","value","emit"],"mappings":"uWAoDMA,EAAiBC,EAAmB,CAAA,CAAE,EAEtCC,EAAWC,EAAOC,CAAK,EAEvBC,EAAeC,GAAoB,QACxBC,EAAAP,EAAA,QAAA,MAAAO,EAAO,KAAKD,EAAE,EAGzBE,EAAoBP,EAAI,CAAC,EACzBQ,EAAkBR,EAAI,CAAC,EAEvBS,EAAiBT,EAAI,EAAK,EAE1BU,EAAOV,IACPW,EAAcX,IAEdY,EAAiC,IAAI,eAAe,IAAM,CAC9D,MAAMC,EAAgBC,IAElBD,GACFE,EAAkBF,CAAa,CACjC,CACD,EAEDG,EAAU,IAAM,CACVN,EAAK,OACQE,EAAA,QAAQF,EAAK,KAAK,EAEnCO,EAAS,IAAM,CACbR,EAAe,MAAQ,EAAA,CACxB,CAAA,CACF,EAEDS,EAAY,IAAM,CACZR,EAAK,OACQE,EAAA,UAAUF,EAAK,KAAK,CACrC,CACD,EAED,MAAMI,EAAmB,IAChBf,EAAe,MAAM,KACzBoB,GAAQA,EAAI,QAAQ,QAAUlB,EAAS,WAAW,KAAA,EAIjDc,EAAqBK,GAAyB,OAE5C,MAAAC,GAAef,EAAAI,EAAK,QAAL,YAAAJ,EAAY,wBAEjC,GAAI,CAACe,EACG,MAAA,IAAI,MAAM,4BAA4B,EAIxC,MAAAC,EAAiBF,EAAQ,wBAGzBG,EAAiB,CACrB,EAAGD,EAAe,EAAID,EAAa,EACnC,EAAGC,EAAe,EAAID,EAAa,CAAA,EAIrCd,EAAkB,MAAQgB,EAAe,EACzCf,EAAgB,MAAQc,EAAe,KAAA,EAGnCE,EAAS,CAACC,EAAmBC,IAAkB,CAEnDC,EAAK,oBAAqBD,CAAK,EAC3BD,EAAM,QAAUA,EAAM,kBAAkB,aAC1CV,EAAkBU,EAAM,MAAM,CAChC,EAGIZ,EAAgBC,IAEtB,OAAID,GACFE,EAAkBF,CAAa"}