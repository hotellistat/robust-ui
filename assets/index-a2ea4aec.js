import{d as J,r as m,t as K,o as Q,c as X,a as s,b as i,s as Y,A as $,m as F,V as k,u as h,z as O,f as V,G as I,q as w,e as Z,g as x,y as R,p as _,I as ee,H as te,O as N}from"./vue.esm-bundler-b2033fd2.js";import{_ as ae}from"./index-693acf9b.js";import{_ as le}from"./index-750889b2.js";import{w as D,o as ne}from"./index-9c32d6c6.js";import{I as re}from"./PhCaretDown.vue-e5f4bd51.js";import{H as ue}from"./PhCheck.vue-dec63360.js";import{g as oe}from"./_commonjsHelpers-de833af9.js";var se=function u(a,t){if(a===t)return!0;if(a&&t&&typeof a=="object"&&typeof t=="object"){if(a.constructor!==t.constructor)return!1;var l,n,c;if(Array.isArray(a)){if(l=a.length,l!=t.length)return!1;for(n=l;n--!==0;)if(!u(a[n],t[n]))return!1;return!0}if(a instanceof Map&&t instanceof Map){if(a.size!==t.size)return!1;for(n of a.entries())if(!t.has(n[0]))return!1;for(n of a.entries())if(!u(n[1],t.get(n[0])))return!1;return!0}if(a instanceof Set&&t instanceof Set){if(a.size!==t.size)return!1;for(n of a.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(a)&&ArrayBuffer.isView(t)){if(l=a.length,l!=t.length)return!1;for(n=l;n--!==0;)if(a[n]!==t[n])return!1;return!0}if(a.constructor===RegExp)return a.source===t.source&&a.flags===t.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===t.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===t.toString();if(c=Object.keys(a),l=c.length,l!==Object.keys(t).length)return!1;for(n=l;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[n]))return!1;for(n=l;n--!==0;){var y=c[n];if(!u(a[y],t[y]))return!1}return!0}return a!==a&&t!==t};const B=oe(se),fe={key:0,class:"flex justify-end px-4 py-2"},ie={key:0},ce={key:1},de={key:1,class:"max-h-72 overflow-auto"},pe=["onClick"],ve={key:2,class:"py-2 text-center text-gray-400"},ye={name:"RobustSelect",inheritAttrs:!1},me=J({...ye,props:{title:{type:String,default:void 0},class:{type:String,default:void 0},boxClass:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0},fixedHeight:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},condensed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},searchFunction:{type:Function,default:void 0},placeholder:{type:String,default:"Select"},options:{type:Array,default:()=>[]},modelValue:{type:[String,Number,Boolean,Array],default:void 0},border:{type:Boolean,default:()=>!0},lazy:{type:Boolean,default:!1}},emits:["update:modelValue","input","change","focus","blur","search"],setup(u,{emit:a}){const t=u,l=a,n=m(),c=m(),{options:y,modelValue:o,border:M}=K(t);m();const v=m(!1),C=m(),g=m(""),q=[],d=m([]);async function S(e){t.searchFunction!==void 0&&(d.value=await t.searchFunction(e)),e===""?d.value=y.value:d.value=y.value.filter(r=>r.title.toLowerCase().includes(e.toLowerCase()))}D(y,async()=>{t.lazy||await S(g.value)},{debounce:150}),D(g,async e=>{t.lazy||await S(g.value),l("search",e)},{debounce:150}),ne(C,e=>{var r;v.value&&((r=c.value)!=null&&r.wrapperRef.contains(e.target)&&e.stopPropagation(),H(),A())});function z(e){t.readonly||t.disabled||(v.value=!0,L(),N(()=>{n.value&&n.value.focus()}),l("focus"))}function A(){v.value=!1,l("blur")}Q(async()=>{await S("")});const j=X(()=>t.options.find(e=>B(e.value,t.modelValue)));function E(e){if(Array.isArray(o.value)){let r=o.value;o.value.includes(e.value)?r=o.value.filter(f=>f!==e.value):r=[...r,e.value],l("input",r),l("change",r),l("update:modelValue",r)}else e.value!==t.modelValue&&(l("change",e.value),l("update:modelValue",e.value)),N(()=>{A(),l("blur")})}function H(){g.value=""}function P(e){return Array.isArray(o.value)?o.value.some(r=>B(r,e.value)):B(e.value,o.value)}function T(){if(Array.isArray(o.value)){if(o.value.length<1)return t.placeholder;const e=[];for(const r of o.value){const f=y.value.find(b=>b.value===r);f&&e.push(f.title)}return e.join(", ")}else return j.value?j.value.title:t.placeholder}function L(){if(Array.isArray(o.value)){const e=[],r=[];for(const f of d.value)o.value.includes(f.value)?e.push(f):r.push(f);d.value=[...e,...r],d.value}}function U(){Array.isArray(o.value)&&(o.value.length<1?W():G())}function W(){const e=d.value.map(r=>r.value);l("input",e),l("change",e),l("update:modelValue",e)}function G(){const e=[];l("input",e),l("change",e),l("update:modelValue",e)}return(e,r)=>{var f,b;return s(),i(I,null,[Y(ae,F({ref_key:"refSelectWrapper",ref:c,type:"button",title:u.title,hint:u.hint,error:u.error,class:e.$props.class,readonly:u.readonly,condensed:u.condensed,"box-class":!h(M)&&"border-0 focus-within:ring-0"},e.$attrs,{onClick:k(z,["stop"]),onFocus:k(z,["stop"]),onBlur:k(A,["stop"])}),{default:$(()=>[e.$slots.prefix?(s(),i("div",{key:0,class:w(["pointer-events-none flex h-full select-none items-center pr-2 text-gray-400",[u.condensed?"pl-2":"pl-3"]])},[Z(e.$slots,"prefix",{tag:"div"})],2)):V("",!0),x("div",F({ref:"refSelect",class:["relative flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||u.condensed?"pl-2":"pl-3"]]},e.$attrs),[x("div",{class:w([[!v.value||!u.searchable?"opacity-100":"opacity-0"],"min-w-0 select-none truncate"])},R(T()),3),v.value&&u.searchable?_((s(),i("input",{key:0,ref_key:"refSelectInput",ref:n,"onUpdate:modelValue":r[0]||(r[0]=p=>g.value=p),class:w(["pointer-events-none absolute block h-full w-full min-w-0 select-none bg-transparent text-current outline-none",[e.$slots.prefix||u.condensed?"pl-2":"pl-3"]])},null,2)),[[ee,g.value]]):V("",!0)],16),x("div",{class:w(["pointer-events-none flex h-full flex-shrink-0 select-none items-center pr-3 text-gray-400 dark:text-gray-500",[u.condensed?"pl-2":"pl-3"]])},[!u.readonly&&!u.disabled?(s(),O(h(re),{key:0,size:14,weight:"bold",class:w(["transition-transform duration-200",{"rotate-180 transform":v.value}])},null,8,["class"])):V("",!0)],2)]),_:3},16,["title","hint","error","class","readonly","condensed","box-class"]),(f=c.value)!=null&&f.wrapperRef?(s(),O(le,{key:0,ref_key:"elementRef",ref:C,open:v.value,"onUpdate:open":r[1]||(r[1]=p=>v.value=p),"same-size":"",class:"z-[100] origin-top select-none overflow-hidden",reference:(b=c.value)==null?void 0:b.wrapperRef,middleware:q},{default:$(()=>[Array.isArray(h(o))?(s(),i("div",fe,[x("button",{type:"button",class:"select-none font-light",onClick:U},[Array.isArray(h(o))&&h(o).length>0?(s(),i("div",ie," Clear all ")):(s(),i("div",ce,"Select all"))])])):V("",!0),d.value.length>0?(s(),i("div",de,[(s(!0),i(I,null,te(d.value,p=>(s(),i("button",{key:String(p.value),type:"button",class:w(["flex w-full min-w-0 max-w-full items-center gap-4 whitespace-pre-wrap px-4 py-2 text-left transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",p.class]),onClick:ge=>E(p)},[x("span",null,R(p.title),1),P(p)?(s(),O(h(ue),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):V("",!0)],10,pe))),128))])):(s(),i("div",ve,"No options"))]),_:1},8,["open","reference"])):V("",!0)],64)}}});me.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"boxClass",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"hint",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"fixedHeight",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"condensed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"searchFunction",type:{name:"(query: string) => Promise<Array<Option>>"},defaultValue:{func:!1,value:"undefined"}},{name:"placeholder",type:{name:"string"},defaultValue:{func:!1,value:"'Select'"}},{name:"options",type:{name:"Array<Option>"},defaultValue:{func:!0,value:"() => []"}},{name:"modelValue",type:{name:"Value | Array<Value>"},defaultValue:{func:!1,value:"undefined"}},{name:"border",type:{name:"boolean"},defaultValue:{func:!0,value:"() => true"}},{name:"lazy",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"},{name:"search"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{me as _};
