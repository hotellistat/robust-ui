import{d as J,r as m,t as K,o as Q,c as X,a as s,b as i,s as j,A as $,m as F,S as k,u as h,z as I,f as w,G as R,q as V,e as Y,g as x,y as N,p as Z,I as ee,H as te,T as D}from"./vue.esm-bundler-5fdd8ab6.js";import{_ as ae}from"./index-b2862db1.js";import{_ as ne}from"./index-54d4f55f.js";import{w as M,o as le}from"./index-aad9d61c.js";import{I as re}from"./PhCaretDown.vue-9c723a04.js";import{H as ue}from"./PhCheck.vue-f0a19b25.js";import{g as oe}from"./_commonjsHelpers-de833af9.js";var se=function o(a,t){if(a===t)return!0;if(a&&t&&typeof a=="object"&&typeof t=="object"){if(a.constructor!==t.constructor)return!1;var n,l,c;if(Array.isArray(a)){if(n=a.length,n!=t.length)return!1;for(l=n;l--!==0;)if(!o(a[l],t[l]))return!1;return!0}if(a instanceof Map&&t instanceof Map){if(a.size!==t.size)return!1;for(l of a.entries())if(!t.has(l[0]))return!1;for(l of a.entries())if(!o(l[1],t.get(l[0])))return!1;return!0}if(a instanceof Set&&t instanceof Set){if(a.size!==t.size)return!1;for(l of a.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(a)&&ArrayBuffer.isView(t)){if(n=a.length,n!=t.length)return!1;for(l=n;l--!==0;)if(a[l]!==t[l])return!1;return!0}if(a.constructor===RegExp)return a.source===t.source&&a.flags===t.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===t.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===t.toString();if(c=Object.keys(a),n=c.length,n!==Object.keys(t).length)return!1;for(l=n;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[l]))return!1;for(l=n;l--!==0;){var y=c[l];if(!o(a[y],t[y]))return!1}return!0}return a!==a&&t!==t};const B=oe(se),fe={key:0,class:"flex justify-end px-4 py-2"},ie={key:0},ce={key:1},de={key:1,class:"max-h-72 overflow-auto"},pe=["onClick"],ve={key:2,class:"py-2 text-center text-gray-400"},ye={name:"RobustSelect",inheritAttrs:!1},me=J({...ye,props:{title:{type:String,default:void 0},class:{type:String,default:void 0},boxClass:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0},fixedHeight:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},condensed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},searchFunction:{type:Function,default:void 0},placeholder:{type:String,default:"Select"},options:{type:Array,default:()=>[]},modelValue:{type:[String,Number,Boolean,Array],default:void 0},border:{type:Boolean,default:()=>!0},lazy:{type:Boolean,default:!1}},emits:["update:modelValue","input","change","focus","blur","search"],setup(o,{emit:a}){const t=o,n=a,l=m(),c=m(),{options:y,modelValue:u,border:T}=K(t);m();const v=m(!1),O=m(),g=m(""),q=[],d=m([]);async function S(e){t.searchFunction!==void 0&&(d.value=await t.searchFunction(e)),e===""?d.value=y.value:d.value=y.value.filter(r=>r.title.toLowerCase().includes(e.toLowerCase()))}M(y,async()=>{t.lazy||await S(g.value)},{debounce:150}),M(g,async e=>{t.lazy||await S(g.value),n("search",e)},{debounce:150}),le(O,e=>{var r;v.value&&((r=c.value)!=null&&r.wrapperRef.contains(e.target)&&e.stopPropagation(),H(),A())});function C(e){v.value=!0,U(),D(()=>{l.value&&l.value.focus()}),n("focus")}function A(){v.value=!1,n("blur")}Q(async()=>{await S("")});const z=X(()=>t.options.find(e=>B(e.value,t.modelValue)));function E(e){if(Array.isArray(u.value)){let r=u.value;u.value.includes(e.value)?r=u.value.filter(f=>f!==e.value):r=[...r,e.value],n("input",r),n("change",r),n("update:modelValue",r)}else e.value!==t.modelValue&&(n("change",e.value),n("update:modelValue",e.value)),D(()=>{A(),n("blur")})}function H(){g.value=""}function P(e){return Array.isArray(u.value)?u.value.some(r=>B(r,e.value)):B(e.value,u.value)}function L(){if(Array.isArray(u.value)){if(u.value.length<1)return t.placeholder;const e=[];for(const r of u.value){const f=y.value.find(b=>b.value===r);f&&e.push(f.title)}return e.join(", ")}else return z.value?z.value.title:t.placeholder}function U(){if(Array.isArray(u.value)){const e=[],r=[];for(const f of d.value)u.value.includes(f.value)?e.push(f):r.push(f);d.value=[...e,...r],d.value}}function W(){Array.isArray(u.value)&&(u.value.length<1?G():_())}function G(){const e=d.value.map(r=>r.value);n("input",e),n("change",e),n("update:modelValue",e)}function _(){const e=[];n("input",e),n("change",e),n("update:modelValue",e)}return(e,r)=>{var f,b;return s(),i(R,null,[j(ae,F({ref_key:"refSelectWrapper",ref:c,type:"button",title:o.title,hint:o.hint,error:o.error,class:e.$props.class,readonly:o.readonly,condensed:o.condensed,"box-class":!h(T)&&"border-0 focus-within:ring-0"},e.$attrs,{onClick:k(C,["stop"]),onFocus:k(C,["stop"]),onBlur:k(A,["stop"])}),{default:$(()=>[e.$slots.prefix?(s(),i("div",{key:0,class:V(["pointer-events-none flex h-full select-none items-center pr-2 text-gray-400",[o.condensed?"pl-2":"pl-3"]])},[Y(e.$slots,"prefix",{tag:"div"})],2)):w("",!0),x("div",F({ref:"refSelect",class:["relative flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||o.condensed?"pl-2":"pl-3"]]},e.$attrs),[x("div",{class:V([[!v.value||!o.searchable?"opacity-100":"opacity-0"],"min-w-0 select-none truncate"])},N(L()),3),v.value&&o.searchable?Z((s(),i("input",{key:0,ref_key:"refSelectInput",ref:l,"onUpdate:modelValue":r[0]||(r[0]=p=>g.value=p),class:V(["pointer-events-none absolute block h-full w-full min-w-0 select-none bg-transparent text-current outline-none",[e.$slots.prefix||o.condensed?"pl-2":"pl-3"]])},null,2)),[[ee,g.value]]):w("",!0)],16),x("div",{class:V(["pointer-events-none flex h-full flex-shrink-0 select-none items-center pr-3 text-gray-400 dark:text-gray-500",[o.condensed?"pl-2":"pl-3"]])},[j(h(re),{size:14,weight:"bold",class:V(["transition-transform duration-200",{"rotate-180 transform":v.value}])},null,8,["class"])],2)]),_:3},16,["title","hint","error","class","readonly","condensed","box-class"]),(f=c.value)!=null&&f.wrapperRef?(s(),I(ne,{key:0,ref_key:"elementRef",ref:O,open:v.value,"onUpdate:open":r[1]||(r[1]=p=>v.value=p),"same-size":"",class:"z-[100] origin-top select-none overflow-hidden",reference:(b=c.value)==null?void 0:b.wrapperRef,middleware:q},{default:$(()=>[Array.isArray(h(u))?(s(),i("div",fe,[x("button",{type:"button",class:"select-none font-light",onClick:W},[Array.isArray(h(u))&&h(u).length>0?(s(),i("div",ie," Clear all ")):(s(),i("div",ce,"Select all"))])])):w("",!0),d.value.length>0?(s(),i("div",de,[(s(!0),i(R,null,te(d.value,p=>(s(),i("button",{key:String(p.value),type:"button",class:V(["flex w-full min-w-0 max-w-full items-center gap-4 whitespace-pre-wrap px-4 py-2 text-left transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",p.class]),onClick:ge=>E(p)},[x("span",null,N(p.title),1),P(p)?(s(),I(h(ue),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):w("",!0)],10,pe))),128))])):(s(),i("div",ve,"No options"))]),_:1},8,["open","reference"])):w("",!0)],64)}}});me.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"boxClass",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"hint",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"fixedHeight",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"condensed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"searchFunction",type:{name:"(query: string) => Promise<Array<Option>>"},defaultValue:{func:!1,value:"undefined"}},{name:"placeholder",type:{name:"string"},defaultValue:{func:!1,value:"'Select'"}},{name:"options",type:{name:"Array<Option>"},defaultValue:{func:!0,value:"() => []"}},{name:"modelValue",type:{name:"Value | Array<Value>"},defaultValue:{func:!1,value:"undefined"}},{name:"border",type:{name:"boolean"},defaultValue:{func:!0,value:"() => true"}},{name:"lazy",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"},{name:"search"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{me as _};
