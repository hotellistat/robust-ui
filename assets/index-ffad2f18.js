import{d as _,j as d,q,s as M,a as U,o as u,b as r,x,z as B,m as $,F,p as g,e as W,f as h,C as I,D as E,g as p,t as N,L as G,u as v,l as J,y as K,I as O}from"./vue.esm-bundler-f1fc8c70.js";import{_ as Q}from"./index-40fd9c1f.js";import{_ as X}from"./index-a18b622e.js";import{w as Y,o as Z}from"./index-a45e3703.js";import{I as ee}from"./PhCaretDown.vue-a7ca04cb.js";import{H as ae}from"./PhCheck.vue-2a6e97ce.js";const le={class:"min-w-0 select-none truncate"},te={key:0,class:"flex justify-end py-2 px-4"},ne={key:0},ue={key:1},se={key:1,class:"max-h-72 overflow-auto"},oe=["onClick"],re={key:2,class:"py-2 text-center text-gray-400"},ie={name:"RobustSelect",inheritAttrs:!1},fe=_({...ie,props:{title:{type:String,default:void 0},class:{type:String,default:void 0},boxClass:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0},fixedHeight:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},condensed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},searchFunction:{type:Function,default:void 0},options:{type:Array,default:()=>[]},modelValue:{type:[String,Number,Boolean,Array],default:void 0}},emits:["update:modelValue","input","change","focus","blur"],setup(n,{emit:t}){const c=n,b=d(),k=d(),{options:y,modelValue:l}=q(c);d();const f=d(!1),w=d(),m=d(""),i=d([]);async function A(e){c.searchFunction!==void 0&&(i.value=await c.searchFunction(e)),e===""?i.value=y.value:i.value=y.value.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()))}Y([m,y],async([e,a])=>{await A(e)},{debounce:150}),Z(w,e=>{f.value&&(e.stopPropagation(),D(),V(),t("blur"))}),M(async()=>{await A("")});const S=U(()=>c.options.find(e=>e.value===c.modelValue));function z(e){if(Array.isArray(l.value)){let a=l.value;l.value.includes(e.value)?a=l.value.filter(s=>s!==e.value):a=[...a,e.value],t("input",a),t("change",a),t("update:modelValue",a)}else t("input",e.value),e.value!==c.modelValue&&(t("change",e.value),t("update:modelValue",e.value)),O(()=>{V(),t("blur")})}function C(){f.value=!0,L(),O(()=>{b.value&&b.value.focus()}),t("focus")}function V(){f.value=!1}function D(){m.value=""}function j(e){return Array.isArray(l.value)?l.value.includes(e.value):l.value===e.value}function R(){if(Array.isArray(l.value)){if(l.value.length<1)return"Select";const e=[];for(const a of l.value){const s=y.value.find(o=>o.value===a);e.push(s.title)}return e.join(", ")}else return S.value?S.value.title:"Select"}function L(){if(Array.isArray(l.value)){const e=[],a=[];for(const s of i.value)l.value.includes(s.value)?e.push(s):a.push(s);i.value=[...e,...a],i.value}}function T(){Array.isArray(l.value)&&(l.value.length<1?H():P())}function H(){const e=i.value.map(a=>a.value);t("input",e),t("change",e),t("update:modelValue",e)}function P(){const e=[];t("input",e),t("change",e),t("update:modelValue",e)}return(e,a)=>{var s;return u(),r(F,null,[x(Q,$({ref_key:"refSelectWrapper",ref:k,title:n.title,hint:n.hint,error:n.error,class:e.$props.class,readonly:n.readonly,condensed:n.condensed},e.$attrs,{onClick:C,onFocus:C,onBlur:V}),{default:B(()=>[e.$slots.prefix?(u(),r("div",{key:0,class:g(["flex h-full items-center pr-2 text-gray-400",[n.condensed?"pl-2":"pl-3"]])},[W(e.$slots,"prefix",{tag:"div"})],2)):h("",!0),I(p("div",$({ref:"select",class:["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]]},e.$attrs),[p("div",le,N(R()),1)],16),[[E,!f.value||!n.searchable]]),f.value&&n.searchable?I((u(),r("input",{key:1,ref_key:"refSelectInput",ref:b,"onUpdate:modelValue":a[0]||(a[0]=o=>m.value=o),size:1,class:g(["block h-full min-w-0 flex-1 flex-shrink bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]])},null,2)),[[G,m.value]]):h("",!0),p("div",{class:g(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[n.condensed?"pl-2":"pl-3"]])},[x(v(ee),{size:14,weight:"bold",class:g(["transition-transform duration-200",{"rotate-180 transform":f.value}])},null,8,["class"])],2)]),_:3},16,["title","hint","error","class","readonly","condensed"]),x(X,{ref_key:"elementRef",ref:w,open:f.value,"onUpdate:open":a[1]||(a[1]=o=>f.value=o),class:"z-[100] origin-top overflow-hidden",reference:(s=k.value)==null?void 0:s.wrapperRef},{default:B(()=>[Array.isArray(v(l))?(u(),r("div",te,[p("button",{type:"button",class:"select-none font-light",onClick:T},[Array.isArray(v(l))&&v(l).length>0?(u(),r("div",ne," Clear all ")):(u(),r("div",ue,"Select all"))])])):h("",!0),i.value.length>0?(u(),r("div",se,[(u(!0),r(F,null,J(i.value,o=>(u(),r("button",{key:String(o.value),type:"button",class:"flex w-full min-w-0 max-w-full items-center gap-4 whitespace-pre-wrap px-4 py-2 text-left transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:de=>z(o)},[p("span",null,N(o.title),1),j(o)?(u(),K(v(ae),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):h("",!0)],8,oe))),128))])):(u(),r("div",re,"No options"))]),_:1},8,["open","reference"])],64)}}});fe.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"boxClass",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"hint",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"fixedHeight",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"condensed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"searchFunction",type:{name:"(query: string) => Promise<Array<Option>>"},defaultValue:{func:!1,value:"undefined"}},{name:"options",type:{name:"Array<Option>"},defaultValue:{func:!0,value:"() => []"}},{name:"modelValue",type:{name:"Value | Array<Value>"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{fe as _};
//# sourceMappingURL=index-ffad2f18.js.map
