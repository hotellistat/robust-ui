import{a as nt,x as it,t as ot,y as V,e as U,z as Ee,B as at,U as ct,o as P,k as T,j as k,G as O,r as be,n as Q,u as E,L as ke,C as ce,D as le,E as se,J as Le,W as Ae,l as lt}from"./iframe.4adac04e.js";import{S as Ie}from"./index.47197eca.js";import{f as ut,g as ht,v as dt,V as ft,z as pt,S as gt}from"./vue-phosphor-icons.2d993973.js";import{_ as mt}from"./index.8feca13e.js";import{_ as Ce}from"./index.34f73181.js";import{_ as vt}from"./index.0e54c00a.js";import{w as yt}from"./index.cae3d216.js";function D(t){return Array.isArray?Array.isArray(t):je(t)==="[object Array]"}const xt=1/0;function _t(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-xt?"-0":e}function Mt(t){return t==null?"":_t(t)}function j(t){return typeof t=="string"}function Pe(t){return typeof t=="number"}function wt(t){return t===!0||t===!1||St(t)&&je(t)=="[object Boolean]"}function Te(t){return typeof t=="object"}function St(t){return Te(t)&&t!==null}function I(t){return t!=null}function ue(t){return!t.trim().length}function je(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Et="Incorrect 'index' type",bt=t=>`Invalid value for key ${t}`,kt=t=>`Pattern length exceeds max of ${t}.`,Lt=t=>`Missing ${t} property in key`,At=t=>`Property 'weight' in key '${t}' must be a positive integer`,Oe=Object.prototype.hasOwnProperty;class It{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let i=Fe(n);s+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Fe(t){let e=null,s=null,n=null,i=1,r=null;if(j(t)||D(t))n=t,e=Re(t),s=he(t);else{if(!Oe.call(t,"name"))throw new Error(Lt("name"));const o=t.name;if(n=o,Oe.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(At(o));e=Re(o),s=he(o),r=t.getFn}return{path:e,id:s,weight:i,src:n,getFn:r}}function Re(t){return D(t)?t:t.split(".")}function he(t){return D(t)?t.join("."):t}function Ct(t,e){let s=[],n=!1;const i=(r,o,a)=>{if(!!I(r))if(!o[a])s.push(r);else{let c=o[a];const h=r[c];if(!I(h))return;if(a===o.length-1&&(j(h)||Pe(h)||wt(h)))s.push(Mt(h));else if(D(h)){n=!0;for(let d=0,g=h.length;d<g;d+=1)i(h[d],o,a+1)}else o.length&&i(h,o,a+1)}};return i(t,j(e)?e.split("."):e,0),n?s:s[0]}const Ot={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Rt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},zt={location:0,threshold:.6,distance:100},$t={useExtendedSearch:!1,getFn:Ct,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var p={...Rt,...Ot,...zt,...$t};const Nt=/[^ ]+/g;function Pt(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(i){const r=i.match(Nt).length;if(s.has(r))return s.get(r);const o=1/Math.pow(r,.5*t),a=parseFloat(Math.round(o*n)/n);return s.set(r,a),a},clear(){s.clear()}}}class ve{constructor({getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){this.norm=Pt(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,j(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();j(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!I(e)||ue(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((i,r)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(!!I(o)){if(D(o)){let a=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:h,value:d}=c.pop();if(!!I(d))if(j(d)&&!ue(d)){let g={v:d,i:h,n:this.norm.get(d)};a.push(g)}else D(d)&&d.forEach((g,m)=>{c.push({nestedArrIndex:m,value:g})})}n.$[r]=a}else if(j(o)&&!ue(o)){let a={v:o,n:this.norm.get(o)};n.$[r]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ve(t,e,{getFn:s=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){const i=new ve({getFn:s,fieldNormWeight:n});return i.setKeys(t.map(Fe)),i.setSources(e),i.create(),i}function Tt(t,{getFn:e=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const{keys:n,records:i}=t,r=new ve({getFn:e,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r}function re(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:i=p.distance,ignoreLocation:r=p.ignoreLocation}={}){const o=e/t.length;if(r)return o;const a=Math.abs(n-s);return i?o+a/i:a?1:o}function jt(t=[],e=p.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let o=t.length;r<o;r+=1){let a=t[r];a&&n===-1?n=r:!a&&n!==-1&&(i=r-1,i-n+1>=e&&s.push([n,i]),n=-1)}return t[r-1]&&r-n>=e&&s.push([n,r-1]),s}const G=32;function Ft(t,e,s,{location:n=p.location,distance:i=p.distance,threshold:r=p.threshold,findAllMatches:o=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,includeMatches:c=p.includeMatches,ignoreLocation:h=p.ignoreLocation}={}){if(e.length>G)throw new Error(kt(G));const d=e.length,g=t.length,m=Math.max(0,Math.min(n,g));let y=r,M=m;const _=a>1||c,W=_?Array(g):[];let R;for(;(R=t.indexOf(e,M))>-1;){let L=re(e,{currentLocation:R,expectedLocation:m,distance:i,ignoreLocation:h});if(y=Math.min(L,y),M=R+d,_){let b=0;for(;b<d;)W[R+b]=1,b+=1}}M=-1;let $=[],N=1,H=d+g;const Y=1<<d-1;for(let L=0;L<d;L+=1){let b=0,F=H;for(;b<F;)re(e,{errors:L,currentLocation:m+F,expectedLocation:m,distance:i,ignoreLocation:h})<=y?b=F:H=F,F=Math.floor((H-b)/2+b);H=F;let S=Math.max(1,m-F+1),Z=o?g:Math.min(m+F,g)+d,C=Array(Z+2);C[Z+1]=(1<<L)-1;for(let A=Z;A>=S;A-=1){let X=A-1,ee=s[t.charAt(X)];if(_&&(W[X]=+!!ee),C[A]=(C[A+1]<<1|1)&ee,L&&(C[A]|=($[A+1]|$[A])<<1|1|$[A+1]),C[A]&Y&&(N=re(e,{errors:L,currentLocation:X,expectedLocation:m,distance:i,ignoreLocation:h}),N<=y)){if(y=N,M=X,M<=m)break;S=Math.max(1,2*m-M)}}if(re(e,{errors:L+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:h})>y)break;$=C}const q={isMatch:M>=0,score:Math.max(.001,N)};if(_){const L=jt(W,a);L.length?c&&(q.indices=L):q.isMatch=!1}return q}function Vt(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const i=t.charAt(s);e[i]=(e[i]||0)|1<<n-s-1}return e}class De{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:i=p.distance,includeMatches:r=p.includeMatches,findAllMatches:o=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,isCaseSensitive:c=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:h},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(m,y)=>{this.chunks.push({pattern:m,alphabet:Vt(m),startIndex:y})},g=this.pattern.length;if(g>G){let m=0;const y=g%G,M=g-y;for(;m<M;)d(this.pattern.substr(m,G),m),m+=G;if(y){const _=g-G;d(this.pattern.substr(_),_)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let M={isMatch:!0,score:0};return n&&(M.indices=[[0,e.length-1]]),M}const{location:i,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,ignoreLocation:h}=this.options;let d=[],g=0,m=!1;this.chunks.forEach(({pattern:M,alphabet:_,startIndex:W})=>{const{isMatch:R,score:$,indices:N}=Ft(e,M,_,{location:i+W,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,includeMatches:n,ignoreLocation:h});R&&(m=!0),g+=$,R&&N&&(d=[...d,...N])});let y={isMatch:m,score:m?g/this.chunks.length:1};return m&&n&&(y.indices=d),y}}class B{constructor(e){this.pattern=e}static isMultiMatch(e){return ze(e,this.multiRegex)}static isSingleMatch(e){return ze(e,this.singleRegex)}search(){}}function ze(t,e){const s=t.match(e);return s?s[1]:null}class Dt extends B{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Wt extends B{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Kt extends B{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ut extends B{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Bt extends B{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Ht extends B{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class We extends B{constructor(e,{location:s=p.location,threshold:n=p.threshold,distance:i=p.distance,includeMatches:r=p.includeMatches,findAllMatches:o=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,isCaseSensitive:c=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){super(e),this._bitapSearch=new De(e,{location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ke extends B{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const i=[],r=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+r,i.push([n,s-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const de=[Dt,Ke,Kt,Ut,Ht,Bt,Wt,We],$e=de.length,Gt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Yt="|";function Xt(t,e={}){return t.split(Yt).map(s=>{let n=s.trim().split(Gt).filter(r=>r&&!!r.trim()),i=[];for(let r=0,o=n.length;r<o;r+=1){const a=n[r];let c=!1,h=-1;for(;!c&&++h<$e;){const d=de[h];let g=d.isMultiMatch(a);g&&(i.push(new d(g,e)),c=!0)}if(!c)for(h=-1;++h<$e;){const d=de[h];let g=d.isSingleMatch(a);if(g){i.push(new d(g,e));break}}}return i})}const Jt=new Set([We.type,Ke.type]);class Qt{constructor(e,{isCaseSensitive:s=p.isCaseSensitive,includeMatches:n=p.includeMatches,minMatchCharLength:i=p.minMatchCharLength,ignoreLocation:r=p.ignoreLocation,findAllMatches:o=p.findAllMatches,location:a=p.location,threshold:c=p.threshold,distance:h=p.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:a,threshold:c,distance:h},this.pattern=s?e:e.toLowerCase(),this.query=Xt(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let r=0,o=[],a=0;for(let c=0,h=s.length;c<h;c+=1){const d=s[c];o.length=0,r=0;for(let g=0,m=d.length;g<m;g+=1){const y=d[g],{isMatch:M,indices:_,score:W}=y.search(e);if(M){if(r+=1,a+=W,n){const R=y.constructor.type;Jt.has(R)?o=[...o,..._]:o.push(_)}}else{a=0,r=0,o.length=0;break}}if(r){let g={isMatch:!0,score:a/r};return n&&(g.indices=o),g}}return{isMatch:!1,score:1}}}const fe=[];function qt(...t){fe.push(...t)}function pe(t,e){for(let s=0,n=fe.length;s<n;s+=1){let i=fe[s];if(i.condition(t,e))return new i(t,e)}return new De(t,e)}const ne={AND:"$and",OR:"$or"},ge={PATH:"$path",PATTERN:"$val"},me=t=>!!(t[ne.AND]||t[ne.OR]),Zt=t=>!!t[ge.PATH],es=t=>!D(t)&&Te(t)&&!me(t),Ne=t=>({[ne.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Ue(t,e,{auto:s=!0}={}){const n=i=>{let r=Object.keys(i);const o=Zt(i);if(!o&&r.length>1&&!me(i))return n(Ne(i));if(es(i)){const c=o?i[ge.PATH]:r[0],h=o?i[ge.PATTERN]:i[c];if(!j(h))throw new Error(bt(c));const d={keyId:he(c),pattern:h};return s&&(d.searcher=pe(h,e)),d}let a={children:[],operator:r[0]};return r.forEach(c=>{const h=i[c];D(h)&&h.forEach(d=>{a.children.push(n(d))})}),a};return me(t)||(t=Ne(t)),n(t)}function ts(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:i,norm:r,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:r))}),s.score=n})}function ss(t,e){const s=t.matches;e.matches=[],I(s)&&s.forEach(n=>{if(!I(n.indices)||!n.indices.length)return;const{indices:i,value:r}=n;let o={indices:i,value:r};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function rs(t,e){e.score=t.score}function ns(t,e,{includeMatches:s=p.includeMatches,includeScore:n=p.includeScore}={}){const i=[];return s&&i.push(ss),n&&i.push(rs),t.map(r=>{const{idx:o}=r,a={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(r,a)}),a})}class J{constructor(e,s={},n){this.options={...p,...s},this.options.useExtendedSearch,this._keyStore=new It(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof ve))throw new Error(Et);this._myIndex=s||Ve(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!I(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,s.push(r))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:a}=this.options;let c=j(e)?j(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ts(c,{ignoreFieldNorm:a}),r&&c.sort(o),Pe(s)&&s>-1&&(c=c.slice(0,s)),ns(c,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const s=pe(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:r,i:o,n:a})=>{if(!I(r))return;const{isMatch:c,score:h,indices:d}=s.searchIn(r);c&&i.push({item:r,idx:o,matches:[{score:h,value:r,norm:a,indices:d}]})}),i}_searchLogical(e){const s=Ue(e,this.options),n=(a,c,h)=>{if(!a.children){const{keyId:g,searcher:m}=a,y=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(c,g),searcher:m});return y&&y.length?[{idx:h,item:c,matches:y}]:[]}const d=[];for(let g=0,m=a.children.length;g<m;g+=1){const y=a.children[g],M=n(y,c,h);if(M.length)d.push(...M);else if(a.operator===ne.AND)return[]}return d},i=this._myIndex.records,r={},o=[];return i.forEach(({$:a,i:c})=>{if(I(a)){let h=n(s,a,c);h.length&&(r[c]||(r[c]={idx:c,item:a,matches:[]},o.push(r[c])),h.forEach(({matches:d})=>{r[c].matches.push(...d)}))}}),o}_searchObjectList(e){const s=pe(e,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach(({$:o,i:a})=>{if(!I(o))return;let c=[];n.forEach((h,d)=>{c.push(...this._findMatches({key:h,value:o[d],searcher:s}))}),c.length&&r.push({idx:a,item:o,matches:c})}),r}_findMatches({key:e,value:s,searcher:n}){if(!I(s))return[];let i=[];if(D(s))s.forEach(({v:r,i:o,n:a})=>{if(!I(r))return;const{isMatch:c,score:h,indices:d}=n.searchIn(r);c&&i.push({score:h,key:e,value:r,idx:o,norm:a,indices:d})});else{const{v:r,n:o}=s,{isMatch:a,score:c,indices:h}=n.searchIn(r);a&&i.push({score:c,key:e,value:r,norm:o,indices:h})}return i}}J.version="6.6.2";J.createIndex=Ve;J.parseIndex=Tt;J.config=p;J.parseQuery=Ue;qt(Qt);const is={class:"search-wrapper"},os={class:"rows-wrapper"},as=["onClick"],cs={class:"mr-auto overflow-hidden truncate break-words"},ls={class:"datatable-grid-columns flex flex-col gap-y-2 gap-x-2 p-4 sm:grid sm:items-center"},us={key:0,class:"overflow-hidden break-words"},hs={key:0},ds={key:1,class:"loading dark:loading-dark h-6 w-full"},fs={class:"flex items-center justify-between py-2"},ps={class:"flex gap-x-2"},gs={class:"flex gap-x-2"},ms={class:"flex gap-x-2"},vs={class:"flex items-center gap-x-2"},ys=k("div",null,"Rows per page:",-1),xs=nt({__name:"index",props:{data:{type:Array,required:!0},options:{type:Object,required:!0},loading:{type:Boolean,default:!1},headerClass:{type:String,default:()=>""}},emits:["update:page","update:rowsLimit","update:sort","update:search","update:selectedRows","update:resize"],setup(t,{emit:e}){var Me;const s=t;it(l=>({"46ff41c6":E(ye),"2b111a6d":E(_)}));const n={serverSide:!1,rowsLimit:10,page:1,maxPage:1,rowsLimitOptions:[10,25,50],resize:!0,minColSize:100},{data:i,options:r,loading:o,headerClass:a}=ot(s),c=V(),h=U(()=>{var l;return(l=r.value.minColSize)!=null?l:n.minColSize}),d=U(()=>{var l;return{includeScore:!1,keys:(l=r.value.searchKeys)!=null?l:r.value.columns.map(f=>f.key),threshold:.3}}),g=U({get(){return m.value.length>0},set(l){l?m.value=$.value.map(f=>f[r.value.id]):m.value=[]}}),m=V([]),y=V(""),M=V((Me=r.value.rowsLimit)!=null?Me:n.rowsLimit),_=U({get(){return r.value.serverSide?r.value.rowsLimit:M.value},set(l){M.value=l}}),R=V((()=>{var f;return((f=r.value.rowsLimitOptions)!=null?f:n.rowsLimitOptions).map(u=>({value:u,title:`${u}`}))})()),$=U(()=>{if(o.value)return Array(_.value).fill({});if(r.value.serverSide)return i.value;const l=A();K(b.value);const u=(b.value-1)*_.value;return l.slice(u,u+_.value)}),N=()=>{var l;return r.value.serverSide?(l=r.value.maxPage)!=null?l:n.maxPage:Math.ceil(i.value.length/_.value)},H=V(N()),Y=U({get(){return r.value.serverSide?N():H.value},set(l){H.value=l}}),L=V((()=>!r.value.page||r.value.page>Y.value?n.page:r.value.page)()),b=U({get(){return r.value.serverSide?r.value.page:L.value},set(l){L.value=l}}),S=V((()=>{const l=[];for(const f of r.value.columns)l.push({...f,direction:0});return l})()),C=V((()=>{const l=r.value.columns.map(f=>f.size);return l.unshift("2rem"),l})()),ye=U(()=>C.value.map(f=>f!==void 0?`minmax(0, ${f})`:"minmax(0, 1fr)").join(" ")),A=()=>{let l=Array.from(i.value);return y.value!==""&&(l=new J(l,d.value).search(y.value).map(x=>x.item)),r.value.serverSide||(Y.value=Math.ceil(l.length/_.value)),l.sort((u,x)=>{for(const v of S.value){if(v.direction===0)continue;const w=v.key;if(v.direction===-1)if(v.sort){const z=v.sort(u[w],x[w],"desc");if(z)return z}else{if(u[w]>x[w])return-1;if(u[w]<x[w])return 1}else if(v.direction===1)if(v.sort){const z=v.sort(u[w],x[w],"asc");if(z)return z}else{if(u[w]>x[w])return 1;if(u[w]<x[w])return-1}}})},X=l=>{const f=S.value.findIndex(v=>v.key===l.key),u=S.value[f];if(u.direction===0||f===S.value.length-1)switch(u.direction){case 0:u.direction=1;break;case 1:u.direction=-1;break;default:u.direction=0}else u.direction=0;S.value.splice(f,1),u.direction?S.value.push(u):S.value.unshift(u);const x=S.value.filter(v=>v.direction!==0);e("update:sort",x)},ee=l=>{const f=S.value.findIndex(v=>v.key===l.key),u=S.value[f];switch(u.direction){case 0:u.direction=1;break;case 1:u.direction=-1;break;default:u.direction=0}S.value.splice(f,1),S.value=S.value.map(v=>({...v,direction:0})),S.value.push(u);const x=S.value.filter(v=>v.direction!==0);e("update:sort",x)},Be=(l,f)=>{if(!o.value)return f.shiftKey?X(l):ee(l)},xe=l=>S.value.find(u=>u.key===l.key).direction,He=(l,f,u)=>Math.min(Math.max(l,f),u),K=(l,f=!0)=>{if(!o.value){if(r.value.serverSide){f&&e("update:page",l);return}b.value=He(l,1,Y.value)}},Ge=()=>K(b.value+1),Ye=()=>K(b.value-1),Xe=()=>K(1),Je=()=>r.value.serverSide?K(r.value.maxPage):K(1/0),Qe=l=>{_.value=l,K(b.value),e("update:rowsLimit",l)};yt(y,()=>{e("update:search",y.value)},{debounce:150}),Ee(Y,()=>{K(b.value)}),Ee(m,()=>{e("update:selectedRows",m.value)});const _e=()=>{c.value.querySelectorAll(".table-column").forEach((u,x)=>{C.value[x+1]=u.clientWidth+"px"}),e("update:resize",C.value)},qe=function(l,f,u){if(!r.value.resize)return;let x=0,v=0;const w=function(oe){x=oe.clientX,v=l.clientWidth,document.addEventListener("mousemove",z),document.addEventListener("mouseup",we),f.classList.add("resizing")},z=function(oe){const ae=oe.clientX-x,tt=v+ae,te=u+1,Se=c.value.querySelectorAll(".table-column"),st=Se[te-1].clientWidth,rt=Se[te].clientWidth;st<=h.value&&ae<0||rt<=h.value&&ae>0||(C.value[te+1]="1fr",C.value[te]=`${tt}px`)},we=function(){_e(),document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",we),f.classList.remove("resizing")};f.addEventListener("mousedown",w)},Ze=()=>{if(!r.value.resize)return;const l=c.value,f=l.querySelectorAll(".table-column"),u=l.querySelector(".rows-wrapper");f.forEach(x=>{const v=x.querySelector(".resizer");v&&(v.style.height=`${u.clientHeight}px`)})},et=()=>{if(!r.value.resize)return;const l=c.value,f=l.querySelectorAll(".table-column"),u=l.querySelector(".rows-wrapper");f.forEach((x,v)=>{const w=document.createElement("div");w.classList.add("resizer"),w.style.height=`${u.clientHeight}px`,x.appendChild(w),qe(x,w,v)}),_e()};let ie;return at(()=>{et(),ie=new ResizeObserver(()=>Ze()),ie.observe(c.value)}),ct(()=>{ie.disconnect()}),(l,f)=>(P(),T("div",{ref_key:"table",ref:c,class:"flex flex-col gap-y-2 sm:gap-y-2"},[k("div",is,[O(vt,{modelValue:y.value,"onUpdate:modelValue":f[0]||(f[0]=u=>y.value=u),placeholder:"Search"},null,8,["modelValue"]),k("div",null,[be(l.$slots,"filter")])]),k("div",os,[k("div",{class:Q(["datatable-grid-columns hidden select-none items-center gap-x-2 p-4 sm:grid",E(a)])},[O(Ce,{modelValue:E(g),"onUpdate:modelValue":f[1]||(f[1]=u=>ke(g)?g.value=u:null)},null,8,["modelValue"]),(P(!0),T(ce,null,le(E(r).columns,u=>{var x;return P(),T("div",{key:u.key,class:Q(["relative table-column",(x=u.class)!=null?x:""])},[k("div",{class:"flex cursor-pointer items-center gap-x-2",onClick:v=>Be(u,v)},[k("div",cs,se(u.name),1),Le(O(E(ut),{class:"text-gray-500",size:20},null,512),[[Ae,xe(u)===1]]),Le(O(E(ht),{class:"text-gray-500",size:20},null,512),[[Ae,xe(u)===-1]])],8,as)],2)}),128))],2),O(Ie,{class:"hidden sm:block"}),k("div",{class:Q(["datatable-grid-rows",E($).length?"":"datatable-grid-rows-empty"])},[(P(!0),T(ce,null,le(E($),(u,x)=>(P(),T("div",{key:x,class:"flex flex-col justify-between"},[k("div",ls,[O(Ce,{modelValue:m.value,"onUpdate:modelValue":f[2]||(f[2]=v=>m.value=v),value:u[E(r).id]},null,8,["modelValue","value"]),(P(!0),T(ce,null,le(E(r).columns,v=>{var w,z;return P(),T("div",{key:v.key,class:Q(["grid grid-cols-2 sm:flex",(w=v.class)!=null?w:""])},[k("div",{class:Q(["block sm:hidden",(z=v.class)!=null?z:""])},se(v.name),3),E(o)?(P(),T("div",ds)):(P(),T("div",us,[l.$slots[v.key]?lt("",!0):(P(),T("div",hs,se(u[v.key]===void 0?"No data":u[v.key]),1)),be(l.$slots,`${v.key}`,{data:u})]))],2)}),128))]),O(Ie)]))),128))],2)]),k("div",fs,[k("div",ps,[k("div",gs,[O(E(dt),{size:24,onClick:Xe}),O(E(ft),{size:24,onClick:Ye})]),k("div",null,se(E(b)),1),k("div",ms,[O(E(pt),{size:24,onClick:Ge}),O(E(gt),{size:24,onClick:Je})])]),k("div",vs,[ys,O(mt,{modelValue:E(_),"onUpdate:modelValue":f[3]||(f[3]=u=>ke(_)?_.value=u:null),options:R.value,onChange:Qe},null,8,["modelValue","options"])])])],512))}});xs.__docgenInfo={exportName:"default",displayName:"DataTable",description:"",tags:{},props:[{name:"data",type:{name:"Record<string, unknown>[]"},required:!0},{name:"options",type:{name:"DataTableOptions"},required:!0},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"headerClass",type:{name:"string"},defaultValue:{func:!0,value:"() => ''"}}],events:[{name:"update:page"},{name:"update:rowsLimit"},{name:"update:sort"},{name:"update:search"},{name:"update:selectedRows"},{name:"update:resize"}],slots:[{name:"filter"},{name:"default",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"data",title:"binding"}]}]};export{xs as _};
//# sourceMappingURL=index.5bf7302c.js.map
