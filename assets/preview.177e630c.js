import{v as C}from"./v4.e04221b2.js";import{w as h,t as D}from"./iframe.72b25c8d.js";var T=(e=>(e.CHANNEL_CREATED="channelCreated",e.CONFIG_ERROR="configError",e.STORY_INDEX_INVALIDATED="storyIndexInvalidated",e.STORY_SPECIFIED="storySpecified",e.SET_CONFIG="setConfig",e.SET_STORIES="setStories",e.SET_INDEX="setIndex",e.SET_CURRENT_STORY="setCurrentStory",e.CURRENT_STORY_WAS_SET="currentStoryWasSet",e.FORCE_RE_RENDER="forceReRender",e.FORCE_REMOUNT="forceRemount",e.PRELOAD_ENTRIES="preloadStories",e.STORY_PREPARED="storyPrepared",e.STORY_CHANGED="storyChanged",e.STORY_UNCHANGED="storyUnchanged",e.STORY_RENDERED="storyRendered",e.STORY_MISSING="storyMissing",e.STORY_ERRORED="storyErrored",e.STORY_THREW_EXCEPTION="storyThrewException",e.STORY_RENDER_PHASE_CHANGED="storyRenderPhaseChanged",e.PLAY_FUNCTION_THREW_EXCEPTION="playFunctionThrewException",e.UPDATE_STORY_ARGS="updateStoryArgs",e.STORY_ARGS_UPDATED="storyArgsUpdated",e.RESET_STORY_ARGS="resetStoryArgs",e.SET_GLOBALS="setGlobals",e.UPDATE_GLOBALS="updateGlobals",e.GLOBALS_UPDATED="globalsUpdated",e.REGISTER_SUBSCRIPTION="registerSubscription",e.PREVIEW_KEYDOWN="previewKeydown",e.SELECT_STORY="selectStory",e.STORIES_COLLAPSE_ALL="storiesCollapseAll",e.STORIES_EXPAND_ALL="storiesExpandAll",e.DOCS_RENDERED="docsRendered",e.SHARED_STATE_CHANGED="sharedStateChanged",e.SHARED_STATE_SET="sharedStateSet",e.NAVIGATE_URL="navigateUrl",e.UPDATE_QUERY_PARAMS="updateQueryParams",e))(T||{}),{CHANNEL_CREATED:W,CONFIG_ERROR:x,STORY_INDEX_INVALIDATED:B,STORY_SPECIFIED:X,SET_STORIES:M,SET_INDEX:V,SET_CONFIG:g,SET_CURRENT_STORY:K,CURRENT_STORY_WAS_SET:k,FORCE_RE_RENDER:Q,FORCE_REMOUNT:q,STORY_PREPARED:z,STORY_CHANGED:J,STORY_UNCHANGED:Z,PRELOAD_ENTRIES:ee,STORY_RENDERED:te,STORY_MISSING:se,STORY_ERRORED:re,STORY_THREW_EXCEPTION:ne,STORY_RENDER_PHASE_CHANGED:ie,PLAY_FUNCTION_THREW_EXCEPTION:ae,UPDATE_STORY_ARGS:oe,STORY_ARGS_UPDATED:Re,RESET_STORY_ARGS:Ee,SET_GLOBALS:he,UPDATE_GLOBALS:Se,GLOBALS_UPDATED:le,REGISTER_SUBSCRIPTION:_e,PREVIEW_KEYDOWN:Te,SELECT_STORY:Oe,STORIES_COLLAPSE_ALL:ce,STORIES_EXPAND_ALL:de,DOCS_RENDERED:Ae,SHARED_STATE_CHANGED:pe,SHARED_STATE_SET:Ce,NAVIGATE_URL:De,UPDATE_QUERY_PARAMS:ge}=T,{LOGLEVEL:N,console:R}=h,o={trace:1,debug:2,info:3,warn:4,error:5,silent:10},u=N,E=o[u]||o.info,v={trace:(e,...t)=>E<=o.trace&&R.trace(e,...t),debug:(e,...t)=>E<=o.debug&&R.debug(e,...t),info:(e,...t)=>E<=o.info&&R.info(e,...t),warn:(e,...t)=>E<=o.warn&&R.warn(e,...t),error:(e,...t)=>E<=o.error&&R.error(e,...t),log:(e,...t)=>E<o.silent&&R.log(e,...t)},y=()=>Math.random().toString(16).slice(2),L=class{constructor({transport:e,async:t=!1}={}){this.sender=y(),this.events={},this.data={},this.isAsync=t,e&&(this.transport=e,this.transport.setHandler(s=>this.handleEvent(s)))}get hasTransport(){return!!this.transport}addListener(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}emit(e,...t){let s={type:e,args:t,from:this.sender},r={};t.length>=1&&t[0]&&t[0].options&&(r=t[0].options);let i=()=>{this.transport&&this.transport.send(s,r),this.handleEvent(s)};this.isAsync?setImmediate(i):i()}last(e){return this.data[e]}eventNames(){return Object.keys(this.events)}listenerCount(e){let t=this.listeners(e);return t?t.length:0}listeners(e){return this.events[e]||void 0}once(e,t){let s=this.onceListener(e,t);this.addListener(e,s)}removeAllListeners(e){e?this.events[e]&&delete this.events[e]:this.events={}}removeListener(e,t){let s=this.listeners(e);s&&(this.events[e]=s.filter(r=>r!==t))}on(e,t){this.addListener(e,t)}off(e,t){this.removeListener(e,t)}handleEvent(e){let t=this.listeners(e.type);t&&t.length&&t.forEach(s=>{s.apply(e,e.args)}),this.data[e.type]=e.args}onceListener(e,t){let s=(...r)=>(this.removeListener(e,s),t(...r));return s}};function I(){let e={setHandler:()=>{},send:()=>{}};return new L({transport:e})}var P=class{constructor(){this.loaders={},this.elements={},this.config={},this.getChannel=()=>(this.channel||this.setChannel(I()),this.channel),this.getServerChannel=()=>{if(!this.serverChannel)throw new Error("Accessing non-existent serverChannel");return this.serverChannel},this.ready=()=>this.promise,this.hasChannel=()=>!!this.channel,this.hasServerChannel=()=>!!this.serverChannel,this.setChannel=e=>{this.channel=e,this.resolve()},this.setServerChannel=e=>{this.serverChannel=e},this.getElements=e=>(this.elements[e]||(this.elements[e]={}),this.elements[e]),this.addPanel=(e,t)=>{this.add(e,{type:D.PANEL,...t})},this.add=(e,t)=>{let{type:s}=t,r=this.getElements(s);r[e]={id:e,...t}},this.setConfig=e=>{Object.assign(this.config,e),this.hasChannel()&&this.getChannel().emit(g,e)},this.getConfig=()=>this.config,this.register=(e,t)=>{this.loaders[e]&&v.warn(`${e} was loaded twice, this could have bad side-effects`),this.loaders[e]=t},this.loadAddons=e=>{Object.values(this.loaders).forEach(t=>t(e))},this.promise=new Promise(e=>{this.resolve=()=>e(this.getChannel())})}},S="__STORYBOOK_ADDONS";function f(){return h[S]||(h[S]=new P),h[S]}var Y=f(),m="storybook/actions",G=`${m}/action-event`,U={depth:10,clearOnStoryChange:!0,limit:50},O=(e,t)=>{let s=Object.getPrototypeOf(e);return!s||t(s)?s:O(s,t)},w=e=>Boolean(typeof e=="object"&&e&&O(e,t=>/^Synthetic(?:Base)?Event$/.test(t.constructor.name))&&typeof e.persist=="function"),$=e=>{if(w(e)){let t=Object.create(e.constructor.prototype,Object.getOwnPropertyDescriptors(e));t.persist();let s=Object.getOwnPropertyDescriptor(t,"view"),r=s==null?void 0:s.value;return typeof r=="object"&&(r==null?void 0:r.constructor.name)==="Window"&&Object.defineProperty(t,"view",{...s,value:Object.create(r.constructor.prototype)}),t}return e};function c(e,t={}){let s={...U,...t},r=function(...i){let n=Y.getChannel(),a=C(),l=5,_=i.map($),A=i.length>1?_:_[0],p={id:a,count:0,data:{name:e,args:A},options:{...s,maxDepth:l+(s.depth||3),allowFunction:s.allowFunction||!1}};n.emit(G,p)};return r.isAction=!0,r}var d=(e,t)=>typeof t[e]>"u"&&!(e in t),b=e=>{let{initialArgs:t,argTypes:s,parameters:{actions:r}}=e;if(!r||r.disable||!r.argTypesRegex||!s)return{};let i=new RegExp(r.argTypesRegex);return Object.entries(s).filter(([n])=>!!i.test(n)).reduce((n,[a,l])=>(d(a,t)&&(n[a]=c(a)),n),{})},H=e=>{let{initialArgs:t,argTypes:s,parameters:{actions:r}}=e;return(r==null?void 0:r.disable)||!s?{}:Object.entries(s).filter(([i,n])=>!!n.action).reduce((i,[n,a])=>(d(n,t)&&(i[n]=c(typeof a.action=="string"?a.action:n)),i),{})},Ne=[H,b];export{Ne as argsEnhancers};
//# sourceMappingURL=preview.177e630c.js.map
