import{d as E,i as Q,j as f,t as G,k as J,a as K,o as r,b as u,g as m,l as $,y as z,p,x as R,u as c,f as y,F as N,N as D,e as X,H as O,I as Y,m as Z,q as P,Q as ee,n as ae}from"./vue.esm-bundler-7f60e394.js";import{_ as te}from"./index-1c9d7327.js";import{P as le}from"./index-9585fd4a.js";import{w as ne,o as re,I as se}from"./index-22d9b209.js";import{H as ue}from"./PhCheck.vue-2562e881.js";const oe=["id"],ie={class:"min-w-0 select-none truncate"},de={key:0,class:"flex justify-end py-2 px-4"},ce={key:0},fe={key:1},pe={key:1,class:"max-h-72 overflow-auto"},ve=["onClick"],me={key:2,class:"py-2 text-center text-gray-400"},ye={name:"RobustSelect",inheritAttrs:!1},he=E({...ye,props:{title:{default:void 0},zIndex:{default:"z-[50]"},hint:{default:void 0},error:{default:void 0},class:{default:void 0},modelValue:{type:[String,Number,Boolean,null,Array],default:void 0},options:null,condensed:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},searchFunction:{type:Function,default:void 0}},emits:["update:modelValue","input","change","focus","blur"],setup(n,{emit:l}){const v=n,w=Q("enableCursorPointer",!0),k=f(),V=f(),{options:h,modelValue:t}=G(v),A=f(),i=f(!1),S=f(),g=f(""),o=f([]);async function C(e){v.searchFunction!==void 0&&(o.value=await v.searchFunction(e)),e===""?o.value=h.value:o.value=h.value.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()))}ne([g,h],async([e,a])=>{await C(e)},{debounce:150}),J(async()=>{await C("")});const T=[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{e.state.styles.popper.width=`${Math.max(e.state.rects.reference.width,200)}px`},effect:e=>{e.state.elements.popper.style.width=`${e.state.elements.reference.getBoundingClientRect().width}px`}}],q=K(()=>v.options.find(e=>e.value===v.modelValue));function j(e){if(Array.isArray(t.value)){let a=t.value;t.value.includes(e.value)?a=t.value.filter(s=>s!==e.value):a=[...a,e.value],l("input",a),l("change",a),l("update:modelValue",a)}else l("input",e.value),e.value!==v.modelValue&&(l("change",e.value),l("update:modelValue",e.value)),D(()=>{b(),l("blur")})}function B(){i.value=!0,_(),D(()=>{k.value&&k.value.focus()}),l("focus")}re(S,e=>{i.value&&(A.value.contains(e.target)&&(e.stopPropagation(),e.preventDefault()),F(),b(),l("blur"))});function b(){i.value=!1}function F(){g.value=""}function M(e){return Array.isArray(t.value)?t.value.includes(e.value):t.value===e.value}function W(){if(Array.isArray(t.value)){if(t.value.length<1)return"Select";const e=[];for(const a of t.value){const s=h.value.find(x=>x.value===a);e.push(s.title)}return e.join(", ")}else return q.value?q.value.title:"Select"}function _(){if(Array.isArray(t.value)){const e=[],a=[];for(const s of o.value)t.value.includes(s.value)?e.push(s):a.push(s);o.value=[...e,...a],console.log(o.value)}}function L(){Array.isArray(t.value)&&(t.value.length<1?H():U())}function H(){const e=o.value.map(a=>a.value);l("input",e),l("change",e),l("update:modelValue",e)}function U(){const e=[];l("input",e),l("change",e),l("update:modelValue",e)}return(e,a)=>{var s,x;return r(),u(N,null,[m("div",{ref_key:"anchorRef",ref:A},[$(te,{ref_key:"refSelectWrapper",ref:V,title:n.title,hint:n.hint,error:n.error,class:p([e.$props.class,""]),readonly:n.readonly,condensed:n.condensed,onClick:B,onFocus:B,onBlur:b},{default:z(d=>[e.$slots.prefix?(r(),u("div",{key:0,class:p(["flex h-full items-center pr-2 text-gray-400",[n.condensed?"pl-2":"pl-3"]])},[X(e.$slots,"prefix",{tag:"div"})],2)):y("",!0),O(m("div",Z({id:d.cuid,ref:"select",class:["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]]},e.$attrs),[m("div",ie,P(W()),1)],16,oe),[[Y,!i.value||!n.searchable]]),i.value&&n.searchable?O((r(),u("input",{key:1,ref_key:"refSelectInput",ref:k,"onUpdate:modelValue":a[0]||(a[0]=I=>g.value=I),size:"1",class:p(["block h-full min-w-0 flex-1 flex-shrink bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]])},null,2)),[[ee,g.value]]):y("",!0),m("div",{class:p(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[n.condensed?"pl-2":"pl-3"]])},[$(c(se),{size:14,weight:"bold",class:p(["transition-transform duration-200",{"rotate-180 transform":i.value}])},null,8,["class"])],2)]),_:3},8,["title","hint","error","class","readonly","condensed"])],512),(s=V.value)!=null&&s.wrapperRef?(r(),R(c(le),{key:0,ref_key:"popperRef",ref:S,open:i.value,"onUpdate:open":a[1]||(a[1]=d=>i.value=d),class:"z-[100] origin-top overflow-hidden","append-to":(x=V.value)==null?void 0:x.wrapperRef,modifiers:T,options:{placement:"bottom-start"},onClosed:F},{default:z(()=>[Array.isArray(c(t))?(r(),u("div",de,[m("div",{class:p(["font-light",[c(w)?"cursor-pointer":"cursor-default"]]),onClick:L},[Array.isArray(c(t))&&c(t).length>0?(r(),u("div",ce," Clear all ")):(r(),u("div",fe,"Select all"))],2)])):y("",!0),o.value.length>0?(r(),u("ul",pe,[(r(!0),u(N,null,ae(o.value,d=>(r(),u("li",{key:String(d.value),class:p(["flex items-center gap-4 px-4 py-2 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",[c(w)?"cursor-pointer":"cursor-default"]]),onClick:I=>j(d)},[m("span",null,P(d.title),1),M(d)?(r(),R(c(ue),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):y("",!0)],10,ve))),128))])):(r(),u("div",me,"No options"))]),_:1},8,["open","append-to"])):y("",!0)],64)}}});he.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"zIndex",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'z-[50]'"}},{name:"hint",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"modelValue",required:!1,type:{name:"union",elements:[{name:"Value"},{name:"Array",elements:[{name:"Value"}]}]},defaultValue:{func:!1,value:"undefined"}},{name:"options",required:!0,type:{name:"Array",elements:[{name:"Option"}]}},{name:"condensed",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchFunction",required:!1,type:{name:"TSFunctionType"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{he as _};
//# sourceMappingURL=index-808338ea.js.map
