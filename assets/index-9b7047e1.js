import{d as J,j as v,t as K,k as X,a as Y,o as r,b as d,g as o,x as w,y as A,p as c,u as f,f as S,F as R,N,e as Z,H as D,I as O,m as _,q as C,Q as ee,l as T,n as ae}from"./vue.esm-bundler-9cbc270d.js";import{_ as W}from"./index-9a1ea72a.js";import{P as le}from"./index-a1a5feae.js";import{w as te,o as ne,I as M}from"./index-419285db.js";import{H as re}from"./PhCheck.vue-d5ba83ff.js";const se=["id"],oe={class:"min-w-0 select-none truncate"},ue={class:"min-w-0 select-none truncate"},ie={key:0,class:"flex justify-end py-2 px-4"},de={key:0},ce={key:1},fe={key:1,class:"max-h-72 overflow-auto"},pe=["onClick"],ve={key:2,class:"py-2 text-center text-gray-400"},me={name:"RobustSelect",inheritAttrs:!1},ye=J({...me,props:{title:{default:void 0},zIndex:{default:"z-[50]"},hint:{default:void 0},error:{default:void 0},class:{default:void 0},modelValue:{type:[String,Number,Boolean,null,Array],default:void 0},options:null,condensed:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},searchFunction:{type:Function,default:void 0}},emits:["update:modelValue","input","change","focus","blur"],setup(l,{emit:n}){const m=l,q=v(),y=v(),{options:h,modelValue:t}=K(m),B=v(),u=v(!1),$=v(),g=v(""),i=v([]);async function F(e){m.searchFunction!==void 0&&(i.value=await m.searchFunction(e)),e===""?i.value=h.value:i.value=h.value.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()))}te([g,h],async([e,a])=>{await F(e)},{debounce:150}),X(async()=>{await F("")});const P=[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{e.state.styles.popper.width=`${Math.max(e.state.rects.reference.width,200)}px`},effect:e=>{e.state.elements.popper.style.width=`${e.state.elements.reference.getBoundingClientRect().width}px`}}],x=Y(()=>m.options.find(e=>e.value===m.modelValue));function j(e){if(Array.isArray(t.value)){let a=t.value;t.value.includes(e.value)?a=t.value.filter(s=>s!==e.value):a=[...a,e.value],n("input",a),n("change",a),n("update:modelValue",a)}else n("input",e.value),e.value!==m.modelValue&&(n("change",e.value),n("update:modelValue",e.value)),N(()=>{V(),n("blur")})}function k(){u.value=!0,U(),N(()=>{q.value.focus()}),n("focus")}ne($,e=>{u.value&&(B.value.contains(e.target)&&(e.stopPropagation(),e.preventDefault()),z(),V(),n("blur"))});function V(){u.value=!1}function z(){g.value=""}function L(e){return Array.isArray(t.value)?t.value.includes(e.value):t.value===e.value}function H(){if(Array.isArray(t.value)){if(t.value.length<1)return"Select";const e=[];for(const a of t.value){const s=h.value.find(b=>b.value===a);e.push(s.title)}return e.join(", ")}else return x.value?x.value.title:"Select"}function U(){if(Array.isArray(t.value)){const e=[],a=[];for(const s of i.value)t.value.includes(s.value)?e.push(s):a.push(s);i.value=[...e,...a],console.log(i.value)}}function E(){Array.isArray(t.value)&&(t.value.length<1?Q():G())}function Q(){const e=i.value.map(a=>a.value);n("input",e),n("change",e),n("update:modelValue",e)}function G(){const e=[];n("input",e),n("change",e),n("update:modelValue",e)}return(e,a)=>{var s,b;return r(),d(R,null,[o("div",{ref_key:"anchorRef",ref:B},[l.searchable?(r(),w(W,{key:0,ref_key:"refSelectWrapper",ref:y,title:l.title,hint:l.hint,error:l.error,class:c([e.$props.class,""]),readonly:l.readonly,condensed:l.condensed,onClick:k,onFocus:k,onBlur:V},{default:A(p=>[e.$slots.prefix?(r(),d("div",{key:0,class:c(["flex h-full items-center pr-2 text-gray-400",[l.condensed?"pl-2":"pl-3"]])},[Z(e.$slots,"prefix",{tag:"div"})],2)):S("",!0),D(o("div",_({id:p.cuid,ref:"select",class:["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||l.condensed?"pl-2":"pl-3"]]},e.$attrs),[o("div",oe,C(H()),1)],16,se),[[O,!u.value]]),D(o("input",{ref_key:"refSelectInput",ref:q,"onUpdate:modelValue":a[0]||(a[0]=I=>g.value=I),size:"1",class:c(["block h-full min-w-0 flex-1 flex-shrink bg-transparent text-current outline-none",[e.$slots.prefix||l.condensed?"pl-2":"pl-3"]])},null,2),[[O,u.value],[ee,g.value]]),o("div",{class:c(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[l.condensed?"pl-2":"pl-3"]])},[T(f(M),{size:14,weight:"bold",class:c(["transition-transform duration-200",{"rotate-180 transform":u.value}])},null,8,["class"])],2)]),_:3},8,["title","hint","error","class","readonly","condensed"])):(r(),w(W,{key:1,ref_key:"refSelectWrapper",ref:y,title:l.title,hint:l.hint,error:l.error,class:c([e.$props.class,""]),readonly:l.readonly,condensed:l.condensed,onClick:k,onFocus:k,onBlur:V},{default:A(()=>[o("div",{class:c(["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||l.condensed?"pl-2":"pl-3"]])},[o("div",ue,C(f(x)?f(x).title:"Select"),1)],2),o("div",{class:c(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[l.condensed?"pl-2":"pl-3"]])},[T(f(M),{size:14,weight:"bold",class:c(["transition-transform duration-200",{"rotate-180 transform":u.value}])},null,8,["class"])],2)]),_:1},8,["title","hint","error","class","readonly","condensed"]))],512),(s=y.value)!=null&&s.wrapperRef?(r(),w(f(le),{key:0,ref_key:"popperRef",ref:$,open:u.value,"onUpdate:open":a[1]||(a[1]=p=>u.value=p),class:"z-[100] origin-top","append-to":(b=y.value)==null?void 0:b.wrapperRef,modifiers:P,options:{placement:"bottom-start"},onClosed:z},{default:A(()=>[Array.isArray(f(t))?(r(),d("div",ie,[o("div",{class:"cursor-pointer font-light",onClick:E},[Array.isArray(f(t))&&f(t).length>0?(r(),d("div",de," Clear all ")):(r(),d("div",ce,"Select all"))])])):S("",!0),i.value.length>0?(r(),d("ul",fe,[(r(!0),d(R,null,ae(i.value,p=>(r(),d("li",{key:String(p.value),class:"flex cursor-default items-center gap-4 px-4 py-2 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:I=>j(p)},[o("span",null,C(p.title),1),L(p)?(r(),w(f(re),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):S("",!0)],8,pe))),128))])):(r(),d("div",ve,"No options"))]),_:1},8,["open","append-to"])):S("",!0)],64)}}});ye.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"zIndex",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'z-[50]'"}},{name:"hint",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"modelValue",required:!1,type:{name:"union",elements:[{name:"Value"},{name:"Array",elements:[{name:"Value"}]}]},defaultValue:{func:!1,value:"undefined"}},{name:"options",required:!0,type:{name:"Array",elements:[{name:"Option"}]}},{name:"condensed",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchFunction",required:!1,type:{name:"TSFunctionType"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{ye as _};
//# sourceMappingURL=index-9b7047e1.js.map
