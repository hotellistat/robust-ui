import{d as E,j as c,t as G,k as J,a as K,o as s,b as r,l as I,y as O,m as N,x as P,u as f,f as y,F as R,L as j,p as v,e as Q,H as z,I as X,g as m,q as D,O as Y,n as Z,i as ee}from"./vue.esm-bundler-b4bdeeb0.js";import{_ as ae}from"./index-fb9fd3fa.js";import{P as te}from"./index-56a24cc0.js";import{w as le,o as ne}from"./index-7f9dbdf9.js";import{I as se}from"./PhCaretDown.vue-dd6a24d7.js";import{H as oe}from"./PhCheck.vue-55785c72.js";const re=["id"],ue={class:"min-w-0 select-none truncate"},ie={key:0,class:"flex justify-end py-2 px-4"},de={key:0},fe={key:1},ce={key:1,class:"max-h-72 overflow-auto"},pe=["onClick"],ve={key:2,class:"py-2 text-center text-gray-400"},ye={name:"RobustSelect",inheritAttrs:!1},me=E({...ye,props:{title:{type:String,default:void 0},class:{type:String,default:void 0},boxClass:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0},fixedHeight:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},condensed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},searchFunction:{type:Function,default:void 0},options:{type:Array,default:()=>[]},modelValue:{type:[String,Number,Boolean,Array],default:void 0}},emits:["update:modelValue","input","change","focus","blur"],setup(n,{emit:l}){const p=n,w=ee("enableCursorPointer",!0),x=c(),V=c(),{options:h,modelValue:t}=G(p);c();const i=c(!1),S=c(),g=c(""),u=c([]);async function A(e){p.searchFunction!==void 0&&(u.value=await p.searchFunction(e)),e===""?u.value=h.value:u.value=h.value.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()))}le([g,h],async([e,a])=>{await A(e)},{debounce:150}),ne(S,e=>{i.value&&(e.stopPropagation(),$(),k(),l("blur"))}),J(async()=>{await A("")});const H=[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{e.state.styles.popper.width=`${Math.max(e.state.rects.reference.width,320)}px`},effect:e=>{e.state.elements.popper.style.width=`${e.state.elements.reference.getBoundingClientRect().width}px`}}],C=K(()=>p.options.find(e=>e.value===p.modelValue));function L(e){if(Array.isArray(t.value)){let a=t.value;t.value.includes(e.value)?a=t.value.filter(o=>o!==e.value):a=[...a,e.value],l("input",a),l("change",a),l("update:modelValue",a)}else l("input",e.value),e.value!==p.modelValue&&(l("change",e.value),l("update:modelValue",e.value)),j(()=>{k(),l("blur")})}function B(){i.value=!0,W(),j(()=>{x.value&&x.value.focus()}),l("focus")}function k(){i.value=!1}function $(){g.value=""}function M(e){return Array.isArray(t.value)?t.value.includes(e.value):t.value===e.value}function T(){if(Array.isArray(t.value)){if(t.value.length<1)return"Select";const e=[];for(const a of t.value){const o=h.value.find(b=>b.value===a);e.push(o.title)}return e.join(", ")}else return C.value?C.value.title:"Select"}function W(){if(Array.isArray(t.value)){const e=[],a=[];for(const o of u.value)t.value.includes(o.value)?e.push(o):a.push(o);u.value=[...e,...a],u.value}}function q(){Array.isArray(t.value)&&(t.value.length<1?U():_())}function U(){const e=u.value.map(a=>a.value);l("input",e),l("change",e),l("update:modelValue",e)}function _(){const e=[];l("input",e),l("change",e),l("update:modelValue",e)}return(e,a)=>{var o,b;return s(),r(R,null,[I(ae,N({ref_key:"refSelectWrapper",ref:V,title:n.title,hint:n.hint,error:n.error,class:e.$props.class,readonly:n.readonly,condensed:n.condensed},e.$attrs,{onClick:B,onFocus:B,onBlur:k}),{default:O(d=>[e.$slots.prefix?(s(),r("div",{key:0,class:v(["flex h-full items-center pr-2 text-gray-400",[n.condensed?"pl-2":"pl-3"]])},[Q(e.$slots,"prefix",{tag:"div"})],2)):y("",!0),z(m("div",N({id:d.cuid,ref:"select",class:["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]]},e.$attrs),[m("div",ue,D(T()),1)],16,re),[[X,!i.value||!n.searchable]]),i.value&&n.searchable?z((s(),r("input",{key:1,ref_key:"refSelectInput",ref:x,"onUpdate:modelValue":a[0]||(a[0]=F=>g.value=F),size:1,class:v(["block h-full min-w-0 flex-1 flex-shrink bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]])},null,2)),[[Y,g.value]]):y("",!0),m("div",{class:v(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[n.condensed?"pl-2":"pl-3"]])},[I(f(se),{size:14,weight:"bold",class:v(["transition-transform duration-200",{"rotate-180 transform":i.value}])},null,8,["class"])],2)]),_:3},16,["title","hint","error","class","readonly","condensed"]),(o=V.value)!=null&&o.wrapperRef?(s(),P(f(te),{key:0,ref_key:"popperRef",ref:S,open:i.value,"onUpdate:open":a[1]||(a[1]=d=>i.value=d),class:"z-[100] origin-top overflow-hidden","append-to":(b=V.value)==null?void 0:b.wrapperRef,modifiers:H,options:{placement:"bottom-start"},onClosed:$},{default:O(()=>[Array.isArray(f(t))?(s(),r("div",ie,[m("div",{class:v(["select-none font-light",[f(w)?"cursor-pointer":"cursor-default"]]),onClick:q},[Array.isArray(f(t))&&f(t).length>0?(s(),r("div",de," Clear all ")):(s(),r("div",fe,"Select all"))],2)])):y("",!0),u.value.length>0?(s(),r("ul",ce,[(s(!0),r(R,null,Z(u.value,d=>(s(),r("li",{key:String(d.value),class:v(["flex items-center gap-4 px-4 py-2 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",[f(w)?"cursor-pointer":"cursor-default"]]),onClick:F=>L(d)},[m("span",null,D(d.title),1),M(d)?(s(),P(f(oe),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):y("",!0)],10,pe))),128))])):(s(),r("div",ve,"No options"))]),_:1},8,["open","append-to"])):y("",!0)],64)}}});me.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"boxClass",type:{name:"string | string[] | object"},defaultValue:{func:!1,value:"undefined"}},{name:"hint",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"fixedHeight",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"condensed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"searchFunction",type:{name:"(query: string) => Promise<Array<Option>>"},defaultValue:{func:!1,value:"undefined"}},{name:"options",type:{name:"Array<Option>"},defaultValue:{func:!0,value:"() => []"}},{name:"modelValue",type:{name:"Value | Array<Value>"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{me as _};
//# sourceMappingURL=index-df746c37.js.map
