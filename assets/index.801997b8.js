import{d as K,l as v,t as Q,q as X,a as Y,o as r,f as c,e as o,b as V,w as A,n as d,u as f,g as S,F as q,z as N,r as Z,A as D,M,m as _,v as C,J as ee,x as O,s as te}from"./vue.esm-bundler.33188a4f.js";import{_ as W}from"./index.5f42a0cc.js";import{P as ae}from"./index.fbdced85.js";import{w as ne,o as le}from"./index.93394147.js";import{A as P,c as re}from"./vue-phosphor-icons.9c01704a.js";const se=["id"],oe={class:"min-w-0 select-none truncate"},ue={class:"min-w-0 select-none truncate"},ie={key:0,class:"flex justify-end py-2 px-4"},ce={key:0},de={key:1},fe={key:1,class:"max-h-72 overflow-auto"},pe=["onClick"],ve={key:2,class:"py-2 text-center text-gray-400"},ye={name:"RobustSelect",inheritAttrs:!1},me=K({...ye,props:{title:{type:String,default:void 0},zIndex:{type:String,default:"z-[50]"},hint:{type:String,default:void 0},error:{type:String,default:void 0},class:{type:String,default:void 0},modelValue:{type:[String,Boolean,Number,Array],required:!0},options:{type:Array,required:!0},condensed:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},searchFunction:{type:Function}},emits:["update:modelValue","input","change","focus","blur"],setup(a,{emit:l}){const y=a,B=v(),m=v(),{options:h,modelValue:n}=Q(y),$=v(),u=v(!1),z=v(),g=v(""),i=v([]);async function F(e){y.searchFunction!==void 0&&(i.value=await y.searchFunction(e)),e===""?i.value=h.value:i.value=h.value.filter(t=>t.title.toLowerCase().includes(e.toLowerCase()))}ne([g,h],async([e,t])=>{await F(e)},{debounce:150}),X(async()=>{await F("")});const T=[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{e.state.styles.popper.width=`${Math.max(e.state.rects.reference.width,200)}px`},effect:e=>{e.state.elements.popper.style.width=`${e.state.elements.reference.getBoundingClientRect().width}px`}}],x=Y(()=>y.options.find(e=>e.value===y.modelValue));function L(e){if(Array.isArray(n.value)){let t=n.value;n.value.includes(e.value)?t=n.value.filter(s=>s!==e.value):t.push(e.value),l("input",t),l("change",t),l("update:modelValue",t)}else l("input",e.value),e.value!==y.modelValue&&(l("change",e.value),l("update:modelValue",e.value)),N(()=>{b(),l("blur")})}function k(){u.value=!0,E(),N(()=>{B.value.focus()}),l("focus")}le(z,e=>{u.value&&($.value.contains(e.target)&&(e.stopPropagation(),e.preventDefault()),R(),b(),l("blur"))});function b(){u.value=!1}function R(){g.value=""}function U(e){return Array.isArray(n.value)?n.value.includes(e.value):n.value===e.value}function j(){if(Array.isArray(n.value)){if(n.value.length<1)return"Select";const e=[];for(const t of n.value){const s=h.value.find(w=>w.value===t);e.push(s.title)}return e.join(", ")}else return x.value?x.value.title:"Select"}function E(){if(Array.isArray(n.value)){const e=[],t=[];for(const s of i.value)n.value.includes(s.value)?e.push(s):t.push(s);i.value=[...e,...t],console.log(i.value)}}function J(){!Array.isArray(n.value)||(n.value.length<1?G():H())}function G(){const e=i.value.map(t=>t.value);l("input",e),l("change",e),l("update:modelValue",e)}function H(){const e=[];l("input",e),l("change",e),l("update:modelValue",e)}return(e,t)=>{var s,w;return r(),c(q,null,[o("div",{ref_key:"anchorRef",ref:$},[a.searchable?(r(),V(W,{key:0,ref_key:"refSelectWrapper",ref:m,title:a.title,hint:a.hint,error:a.error,class:d([e.$props.class,""]),readonly:a.readonly,condensed:a.condensed,onClick:k,onFocus:k,onBlur:b},{default:A(p=>[e.$slots.prefix?(r(),c("div",{key:0,class:d(["flex h-full items-center pr-2 text-gray-400",[a.condensed?"pl-2":"pl-3"]])},[Z(e.$slots,"prefix",{tag:"div"})],2)):S("",!0),D(o("div",_({id:p.cuid,ref:"select",class:["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||a.condensed?"pl-2":"pl-3"]]},e.$attrs),[o("div",oe,C(j()),1)],16,se),[[M,!u.value]]),D(o("input",{ref_key:"refSelectInput",ref:B,"onUpdate:modelValue":t[0]||(t[0]=I=>g.value=I),size:"1",class:d(["block h-full min-w-0 flex-1 flex-shrink bg-transparent text-current outline-none",[e.$slots.prefix||a.condensed?"pl-2":"pl-3"]])},null,2),[[M,u.value],[ee,g.value]]),o("div",{class:d(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[a.condensed?"pl-2":"pl-3"]])},[O(f(P),{size:14,weight:"bold",class:d(["transition-transform duration-200",{"rotate-180 transform":u.value}])},null,8,["class"])],2)]),_:3},8,["title","hint","error","class","readonly","condensed"])):(r(),V(W,{key:1,ref_key:"refSelectWrapper",ref:m,title:a.title,hint:a.hint,error:a.error,class:d([e.$props.class,""]),readonly:a.readonly,condensed:a.condensed,onClick:k,onFocus:k,onBlur:b},{default:A(()=>[o("div",{class:d(["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||a.condensed?"pl-2":"pl-3"]])},[o("div",ue,C(f(x)?f(x).title:"Select"),1)],2),o("div",{class:d(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[a.condensed?"pl-2":"pl-3"]])},[O(f(P),{size:14,weight:"bold",class:d(["transition-transform duration-200",{"rotate-180 transform":u.value}])},null,8,["class"])],2)]),_:1},8,["title","hint","error","class","readonly","condensed"]))],512),(s=m.value)!=null&&s.wrapperRef?(r(),V(f(ae),{key:0,ref_key:"popperRef",ref:z,open:u.value,"onUpdate:open":t[1]||(t[1]=p=>u.value=p),class:"z-[100] origin-top","append-to":(w=m.value)==null?void 0:w.wrapperRef,modifiers:T,options:{placement:"bottom-start"},onClosed:R},{default:A(()=>[Array.isArray(f(n))?(r(),c("div",ie,[o("div",{class:"cursor-pointer font-light",onClick:J},[Array.isArray(f(n))&&f(n).length>0?(r(),c("div",ce," Clear all ")):(r(),c("div",de,"Select all"))])])):S("",!0),i.value.length>0?(r(),c("ul",fe,[(r(!0),c(q,null,te(i.value,p=>(r(),c("li",{key:p.value,class:"flex cursor-default items-center gap-4 px-4 py-2 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:I=>L(p)},[o("span",null,C(p.title),1),U(p)?(r(),V(f(re),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):S("",!0)],8,pe))),128))])):(r(),c("div",ve,"No options"))]),_:1},8,["open","append-to"])):S("",!0)],64)}}});me.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"zIndex",type:{name:"string"},defaultValue:{func:!1,value:"'z-[50]'"}},{name:"hint",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"modelValue",type:{name:"string|boolean|number|array"},required:!0},{name:"options",type:{name:"Array<{ title: string; value: string | number }>"},required:!0},{name:"condensed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchFunction",type:{name:"func"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{me as _};
//# sourceMappingURL=index.801997b8.js.map
