import{w as R}from"./iframe.e8056002.js";module&&module.hot&&module.hot.decline&&module.hot.decline();var c="links",D=()=>Math.random().toString(16).slice(2),N=class{constructor({transport:e,async:t=!1}={}){this.sender=D(),this.events={},this.data={},this.isAsync=t,e&&(this.transport=e,this.transport.setHandler(s=>this.handleEvent(s)))}get hasTransport(){return!!this.transport}addListener(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}emit(e,...t){let s={type:e,args:t,from:this.sender},r={};t.length>=1&&t[0]&&t[0].options&&(r=t[0].options);let n=()=>{this.transport&&this.transport.send(s,r),this.handleEvent(s)};this.isAsync?setImmediate(n):n()}last(e){return this.data[e]}eventNames(){return Object.keys(this.events)}listenerCount(e){let t=this.listeners(e);return t?t.length:0}listeners(e){return this.events[e]||void 0}once(e,t){let s=this.onceListener(e,t);this.addListener(e,s)}removeAllListeners(e){e?this.events[e]&&delete this.events[e]:this.events={}}removeListener(e,t){let s=this.listeners(e);s&&(this.events[e]=s.filter(r=>r!==t))}on(e,t){this.addListener(e,t)}off(e,t){this.removeListener(e,t)}handleEvent(e){let t=this.listeners(e.type);t&&t.length&&t.forEach(s=>{s.apply(e,e.args)}),this.data[e.type]=e.args}onceListener(e,t){let s=(...r)=>(this.removeListener(e,s),t(...r));return s}},d=(e=>(e.CHANNEL_CREATED="channelCreated",e.CONFIG_ERROR="configError",e.STORY_INDEX_INVALIDATED="storyIndexInvalidated",e.STORY_SPECIFIED="storySpecified",e.SET_CONFIG="setConfig",e.SET_STORIES="setStories",e.SET_INDEX="setIndex",e.SET_CURRENT_STORY="setCurrentStory",e.CURRENT_STORY_WAS_SET="currentStoryWasSet",e.FORCE_RE_RENDER="forceReRender",e.FORCE_REMOUNT="forceRemount",e.PRELOAD_ENTRIES="preloadStories",e.STORY_PREPARED="storyPrepared",e.STORY_CHANGED="storyChanged",e.STORY_UNCHANGED="storyUnchanged",e.STORY_RENDERED="storyRendered",e.STORY_MISSING="storyMissing",e.STORY_ERRORED="storyErrored",e.STORY_THREW_EXCEPTION="storyThrewException",e.STORY_RENDER_PHASE_CHANGED="storyRenderPhaseChanged",e.PLAY_FUNCTION_THREW_EXCEPTION="playFunctionThrewException",e.UPDATE_STORY_ARGS="updateStoryArgs",e.STORY_ARGS_UPDATED="storyArgsUpdated",e.RESET_STORY_ARGS="resetStoryArgs",e.SET_GLOBALS="setGlobals",e.UPDATE_GLOBALS="updateGlobals",e.GLOBALS_UPDATED="globalsUpdated",e.REGISTER_SUBSCRIPTION="registerSubscription",e.PREVIEW_KEYDOWN="previewKeydown",e.SELECT_STORY="selectStory",e.STORIES_COLLAPSE_ALL="storiesCollapseAll",e.STORIES_EXPAND_ALL="storiesExpandAll",e.DOCS_RENDERED="docsRendered",e.SHARED_STATE_CHANGED="sharedStateChanged",e.SHARED_STATE_SET="sharedStateSet",e.NAVIGATE_URL="navigateUrl",e.UPDATE_QUERY_PARAMS="updateQueryParams",e))(d||{}),{CHANNEL_CREATED:F,CONFIG_ERROR:W,STORY_INDEX_INVALIDATED:X,STORY_SPECIFIED:B,SET_STORIES:M,SET_INDEX:x,SET_CONFIG:L,SET_CURRENT_STORY:V,CURRENT_STORY_WAS_SET:k,FORCE_RE_RENDER:K,FORCE_REMOUNT:j,STORY_PREPARED:Q,STORY_CHANGED:p,STORY_UNCHANGED:q,PRELOAD_ENTRIES:z,STORY_RENDERED:J,STORY_MISSING:Z,STORY_ERRORED:ee,STORY_THREW_EXCEPTION:te,STORY_RENDER_PHASE_CHANGED:se,PLAY_FUNCTION_THREW_EXCEPTION:re,UPDATE_STORY_ARGS:ne,STORY_ARGS_UPDATED:ie,RESET_STORY_ARGS:ae,SET_GLOBALS:oe,UPDATE_GLOBALS:Ee,GLOBALS_UPDATED:he,REGISTER_SUBSCRIPTION:Re,PREVIEW_KEYDOWN:Se,SELECT_STORY:I,STORIES_COLLAPSE_ALL:le,STORIES_EXPAND_ALL:_e,DOCS_RENDERED:Te,SHARED_STATE_CHANGED:de,SHARED_STATE_SET:Oe,NAVIGATE_URL:Ae,UPDATE_QUERY_PARAMS:Ce}=d,{LOGLEVEL:g,console:E}=R,a={trace:1,debug:2,info:3,warn:4,error:5,silent:10},v=g,h=a[v]||a.info,P={trace:(e,...t)=>h<=a.trace&&E.trace(e,...t),debug:(e,...t)=>h<=a.debug&&E.debug(e,...t),info:(e,...t)=>h<=a.info&&E.info(e,...t),warn:(e,...t)=>h<=a.warn&&E.warn(e,...t),error:(e,...t)=>h<=a.error&&E.error(e,...t),log:(e,...t)=>h<a.silent&&E.log(e,...t)};function m(){let e={setHandler:()=>{},send:()=>{}};return new N({transport:e})}var u=(e=>(e.TAB="tab",e.PANEL="panel",e.TOOL="tool",e.TOOLEXTRA="toolextra",e.PREVIEW="preview",e.NOTES_ELEMENT="notes-element",e))(u||{}),Y=class{constructor(){this.loaders={},this.elements={},this.config={},this.getChannel=()=>(this.channel||this.setChannel(m()),this.channel),this.getServerChannel=()=>{if(!this.serverChannel)throw new Error("Accessing non-existent serverChannel");return this.serverChannel},this.ready=()=>this.promise,this.hasChannel=()=>!!this.channel,this.hasServerChannel=()=>!!this.serverChannel,this.setChannel=e=>{this.channel=e,this.resolve()},this.setServerChannel=e=>{this.serverChannel=e},this.getElements=e=>(this.elements[e]||(this.elements[e]={}),this.elements[e]),this.addPanel=(e,t)=>{this.add(e,{type:"panel",...t})},this.add=(e,t)=>{let{type:s}=t,r=this.getElements(s);r[e]={id:e,...t}},this.setConfig=e=>{Object.assign(this.config,e),this.hasChannel()&&this.getChannel().emit(L,e)},this.getConfig=()=>this.config,this.register=(e,t)=>{this.loaders[e]&&P.warn(`${e} was loaded twice, this could have bad side-effects`),this.loaders[e]=t},this.loadAddons=e=>{Object.values(this.loaders).forEach(t=>t(e))},this.promise=new Promise(e=>{this.resolve=()=>e(this.getChannel())})}},T="__STORYBOOK_ADDONS";function f(){return R[T]||(R[T]=new Y),R[T]}var O=f(),y=({name:e,parameterName:t,wrapper:s,skipIfNoParametersOrOptions:r=!1})=>{let n=i=>(o,S)=>{let l=S.parameters&&S.parameters[t];return l&&l.disable||r&&!i&&!l?o(S):s(o,S,{options:i,parameters:l})};return(...i)=>typeof i[0]=="function"?n()(...i):(...o)=>{if(o.length>1)return i.length>1?n(i)(...o):n(...i)(...o);throw new Error(`Passing stories directly into ${e}() is not allowed,
        instead use addDecorator(${e}) and pass options with the '${t}' parameter`)}},{document:A,HTMLElement:G}=R,U=e=>O.getChannel().emit(I,e),C=e=>{let{target:t}=e;if(!(t instanceof G))return;let s=t,{sbKind:r,sbStory:n}=s.dataset;(r||n)&&(e.preventDefault(),U({kind:r,story:n}))},_=!1,w=()=>{_||(_=!0,A.addEventListener("click",C))},$=()=>{_&&(_=!1,A.removeEventListener("click",C))},H=y({name:"withLinks",parameterName:c,wrapper:(e,t)=>(w(),O.getChannel().once(p,$),e(t))}),ce=[H];export{ce as decorators};
//# sourceMappingURL=preview.4d216e94.js.map
