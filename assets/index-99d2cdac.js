import{d as E,i as G,j as f,t as J,k as K,a as Q,o as s,b as o,l as $,y as F,m as I,x as z,u as d,f as y,F as R,p as v,e as X,H as N,I as Y,g as h,q as O,O as Z,n as ee,L as T}from"./vue.esm-bundler-11053946.js";import{_ as ae}from"./index-a537f561.js";import{P as le}from"./index-5e6b3be4.js";import{w as te,o as ne}from"./index-1748c350.js";import{I as se}from"./PhCaretDown.vue-6db8f745.js";import{H as re}from"./PhCheck.vue-f0ad762b.js";const oe=["id"],ue={class:"min-w-0 select-none truncate"},ie={key:0,class:"flex justify-end py-2 px-4"},de={key:0},ce={key:1},fe={key:1,class:"max-h-72 overflow-auto"},pe=["onClick"],ve={key:2,class:"py-2 text-center text-gray-400"},me={name:"RobustSelect",inheritAttrs:!1},ye=E({...me,props:{title:{default:void 0},zIndex:{default:"z-[50]"},hint:{default:void 0},error:{default:void 0},class:{default:void 0},modelValue:{type:[String,Number,Boolean,null,Array],default:void 0},options:null,condensed:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},searchFunction:{type:Function,default:void 0}},emits:["update:modelValue","input","change","focus","blur"],setup(n,{emit:t}){const p=n,w=G("enableCursorPointer",!0),k=f(),m=f(),{options:g,modelValue:l}=J(p);f();const c=f(!1),D=f(),x=f(""),u=f([]);async function A(e){p.searchFunction!==void 0&&(u.value=await p.searchFunction(e)),e===""?u.value=g.value:u.value=g.value.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()))}te([x,g],async([e,a])=>{await A(e)},{debounce:150}),K(async()=>{ne(m.value.wrapperRef,()=>{console.log("outside"),q(),b(),t("blur")}),await A("")});const P=[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{e.state.styles.popper.width=`${Math.max(e.state.rects.reference.width,320)}px`},effect:e=>{e.state.elements.popper.style.width=`${e.state.elements.reference.getBoundingClientRect().width}px`}}],S=Q(()=>p.options.find(e=>e.value===p.modelValue));function j(e){if(Array.isArray(l.value)){let a=l.value;l.value.includes(e.value)?a=l.value.filter(r=>r!==e.value):a=[...a,e.value],t("input",a),t("change",a),t("update:modelValue",a)}else t("input",e.value),e.value!==p.modelValue&&(t("change",e.value),t("update:modelValue",e.value)),T(()=>{b(),t("blur")})}function C(){c.value=!0,W(),T(()=>{k.value&&k.value.focus()}),t("focus")}console.log(m);function b(){c.value=!1}function q(){x.value=""}function L(e){return Array.isArray(l.value)?l.value.includes(e.value):l.value===e.value}function M(){if(Array.isArray(l.value)){if(l.value.length<1)return"Select";const e=[];for(const a of l.value){const r=g.value.find(V=>V.value===a);e.push(r.title)}return e.join(", ")}else return S.value?S.value.title:"Select"}function W(){if(Array.isArray(l.value)){const e=[],a=[];for(const r of u.value)l.value.includes(r.value)?e.push(r):a.push(r);u.value=[...e,...a],console.log(u.value)}}function H(){Array.isArray(l.value)&&(l.value.length<1?U():_())}function U(){const e=u.value.map(a=>a.value);t("input",e),t("change",e),t("update:modelValue",e)}function _(){const e=[];t("input",e),t("change",e),t("update:modelValue",e)}return(e,a)=>{var r,V;return s(),o(R,null,[$(ae,I({ref_key:"refSelectWrapper",ref:m,title:n.title,hint:n.hint,error:n.error,class:e.$props.class,readonly:n.readonly,condensed:n.condensed},e.$attrs,{onClick:C,onFocus:C,onBlur:b}),{default:F(i=>[e.$slots.prefix?(s(),o("div",{key:0,class:v(["flex h-full items-center pr-2 text-gray-400",[n.condensed?"pl-2":"pl-3"]])},[X(e.$slots,"prefix",{tag:"div"})],2)):y("",!0),N(h("div",I({id:i.cuid,ref:"select",class:["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]]},e.$attrs),[h("div",ue,O(M()),1)],16,oe),[[Y,!c.value||!n.searchable]]),c.value&&n.searchable?N((s(),o("input",{key:1,ref_key:"refSelectInput",ref:k,"onUpdate:modelValue":a[0]||(a[0]=B=>x.value=B),size:"1",class:v(["block h-full min-w-0 flex-1 flex-shrink bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]])},null,2)),[[Z,x.value]]):y("",!0),h("div",{class:v(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[n.condensed?"pl-2":"pl-3"]])},[$(d(se),{size:14,weight:"bold",class:v(["transition-transform duration-200",{"rotate-180 transform":c.value}])},null,8,["class"])],2)]),_:3},16,["title","hint","error","class","readonly","condensed"]),(r=m.value)!=null&&r.wrapperRef?(s(),z(d(le),{key:0,ref_key:"popperRef",ref:D,open:c.value,"onUpdate:open":a[1]||(a[1]=i=>c.value=i),class:"z-[100] origin-top overflow-hidden","append-to":(V=m.value)==null?void 0:V.wrapperRef,modifiers:P,options:{placement:"bottom-start"},onClosed:q},{default:F(()=>[Array.isArray(d(l))?(s(),o("div",ie,[h("div",{class:v(["select-none font-light",[d(w)?"cursor-pointer":"cursor-default"]]),onClick:H},[Array.isArray(d(l))&&d(l).length>0?(s(),o("div",de," Clear all ")):(s(),o("div",ce,"Select all"))],2)])):y("",!0),u.value.length>0?(s(),o("ul",fe,[(s(!0),o(R,null,ee(u.value,i=>(s(),o("li",{key:String(i.value),class:v(["flex items-center gap-4 px-4 py-2 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",[d(w)?"cursor-pointer":"cursor-default"]]),onClick:B=>j(i)},[h("span",null,O(i.title),1),L(i)?(s(),z(d(re),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):y("",!0)],10,pe))),128))])):(s(),o("div",ve,"No options"))]),_:1},8,["open","append-to"])):y("",!0)],64)}}});ye.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"zIndex",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'z-[50]'"}},{name:"hint",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"modelValue",required:!1,type:{name:"union",elements:[{name:"Value"},{name:"Array",elements:[{name:"Value"}]}]},defaultValue:{func:!1,value:"undefined"}},{name:"options",required:!0,type:{name:"Array",elements:[{name:"Option"}]}},{name:"condensed",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchFunction",required:!1,type:{name:"TSFunctionType"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{ye as _};
//# sourceMappingURL=index-99d2cdac.js.map
