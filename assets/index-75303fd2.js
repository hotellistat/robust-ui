import{d as U,j as c,t as E,k as Q,a as G,o as s,b as u,g as p,l as I,y as $,p as m,x as z,u as v,f as y,F as R,N,e as J,H as D,I as K,m as X,q as O,Q as Y,n as Z}from"./vue.esm-bundler-520a4af3.js";import{_ as ee}from"./index-843876fe.js";import{P as ae}from"./index-f8a43586.js";import{w as le,o as te,I as ne}from"./index-0db6ea41.js";import{H as se}from"./PhCheck.vue-47cf9af8.js";const re=["id"],ue={class:"min-w-0 select-none truncate"},oe={key:0,class:"flex justify-end py-2 px-4"},ie={key:0},de={key:1},ce={key:1,class:"max-h-72 overflow-auto"},fe=["onClick"],pe={key:2,class:"py-2 text-center text-gray-400"},ve={name:"RobustSelect",inheritAttrs:!1},me=U({...ve,props:{title:{default:void 0},zIndex:{default:"z-[50]"},hint:{default:void 0},error:{default:void 0},class:{default:void 0},modelValue:{type:[String,Number,Boolean,null,Array],default:void 0},options:null,condensed:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},searchFunction:{type:Function,default:void 0}},emits:["update:modelValue","input","change","focus","blur"],setup(n,{emit:t}){const f=n,b=c(),k=c(),{options:h,modelValue:l}=E(f),w=c(),i=c(!1),A=c(),g=c(""),o=c([]);async function S(e){f.searchFunction!==void 0&&(o.value=await f.searchFunction(e)),e===""?o.value=h.value:o.value=h.value.filter(a=>a.title.toLowerCase().includes(e.toLowerCase()))}le([g,h],async([e,a])=>{await S(e)},{debounce:150}),Q(async()=>{await S("")});const T=[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{e.state.styles.popper.width=`${Math.max(e.state.rects.reference.width,200)}px`},effect:e=>{e.state.elements.popper.style.width=`${e.state.elements.reference.getBoundingClientRect().width}px`}}],C=G(()=>f.options.find(e=>e.value===f.modelValue));function M(e){if(Array.isArray(l.value)){let a=l.value;l.value.includes(e.value)?a=l.value.filter(r=>r!==e.value):a=[...a,e.value],t("input",a),t("change",a),t("update:modelValue",a)}else t("input",e.value),e.value!==f.modelValue&&(t("change",e.value),t("update:modelValue",e.value)),N(()=>{V(),t("blur")})}function q(){i.value=!0,_(),N(()=>{b.value.focus()}),t("focus")}te(A,e=>{i.value&&(w.value.contains(e.target)&&(e.stopPropagation(),e.preventDefault()),B(),V(),t("blur"))});function V(){i.value=!1}function B(){g.value=""}function P(e){return Array.isArray(l.value)?l.value.includes(e.value):l.value===e.value}function W(){if(Array.isArray(l.value)){if(l.value.length<1)return"Select";const e=[];for(const a of l.value){const r=h.value.find(x=>x.value===a);e.push(r.title)}return e.join(", ")}else return C.value?C.value.title:"Select"}function _(){if(Array.isArray(l.value)){const e=[],a=[];for(const r of o.value)l.value.includes(r.value)?e.push(r):a.push(r);o.value=[...e,...a],console.log(o.value)}}function j(){Array.isArray(l.value)&&(l.value.length<1?L():H())}function L(){const e=o.value.map(a=>a.value);t("input",e),t("change",e),t("update:modelValue",e)}function H(){const e=[];t("input",e),t("change",e),t("update:modelValue",e)}return(e,a)=>{var r,x;return s(),u(R,null,[p("div",{ref_key:"anchorRef",ref:w},[I(ee,{ref_key:"refSelectWrapper",ref:k,title:n.title,hint:n.hint,error:n.error,class:m([e.$props.class,""]),readonly:n.readonly,condensed:n.condensed,onClick:q,onFocus:q,onBlur:V},{default:$(d=>[e.$slots.prefix?(s(),u("div",{key:0,class:m(["flex h-full items-center pr-2 text-gray-400",[n.condensed?"pl-2":"pl-3"]])},[J(e.$slots,"prefix",{tag:"div"})],2)):y("",!0),D(p("div",X({id:d.cuid,ref:"select",class:["flex h-full min-w-0 flex-1 flex-shrink items-center bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]]},e.$attrs),[p("div",ue,O(W()),1)],16,re),[[K,!i.value||!n.searchable]]),i.value&&n.searchable?D((s(),u("input",{key:1,ref_key:"refSelectInput",ref:b,"onUpdate:modelValue":a[0]||(a[0]=F=>g.value=F),size:"1",class:m(["block h-full min-w-0 flex-1 flex-shrink bg-transparent text-current outline-none",[e.$slots.prefix||n.condensed?"pl-2":"pl-3"]])},null,2)),[[Y,g.value]]):y("",!0),p("div",{class:m(["flex h-full flex-shrink-0 items-center pr-3 text-gray-400 dark:text-gray-500",[n.condensed?"pl-2":"pl-3"]])},[I(v(ne),{size:14,weight:"bold",class:m(["transition-transform duration-200",{"rotate-180 transform":i.value}])},null,8,["class"])],2)]),_:3},8,["title","hint","error","class","readonly","condensed"])],512),(r=k.value)!=null&&r.wrapperRef?(s(),z(v(ae),{key:0,ref_key:"popperRef",ref:A,open:i.value,"onUpdate:open":a[1]||(a[1]=d=>i.value=d),class:"z-[100] origin-top","append-to":(x=k.value)==null?void 0:x.wrapperRef,modifiers:T,options:{placement:"bottom-start"},onClosed:B},{default:$(()=>[Array.isArray(v(l))?(s(),u("div",oe,[p("div",{class:"cursor-pointer font-light",onClick:j},[Array.isArray(v(l))&&v(l).length>0?(s(),u("div",ie," Clear all ")):(s(),u("div",de,"Select all"))])])):y("",!0),o.value.length>0?(s(),u("ul",ce,[(s(!0),u(R,null,Z(o.value,d=>(s(),u("li",{key:String(d.value),class:"flex cursor-default items-center gap-4 px-4 py-2 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:F=>M(d)},[p("span",null,O(d.title),1),P(d)?(s(),z(v(se),{key:0,class:"ml-auto flex-shrink-0 text-gray-400",weight:"bold",size:"14"})):y("",!0)],8,fe))),128))])):(s(),u("div",pe,"No options"))]),_:1},8,["open","append-to"])):y("",!0)],64)}}});me.__docgenInfo={exportName:"default",displayName:"Select",description:"",tags:{},props:[{name:"title",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"zIndex",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'z-[50]'"}},{name:"hint",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"error",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"class",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"modelValue",required:!1,type:{name:"union",elements:[{name:"Value"},{name:"Array",elements:[{name:"Value"}]}]},defaultValue:{func:!1,value:"undefined"}},{name:"options",required:!0,type:{name:"Array",elements:[{name:"Option"}]}},{name:"condensed",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchable",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"readonly",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchFunction",required:!1,type:{name:"TSFunctionType"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"update:modelValue"},{name:"input"},{name:"change"},{name:"focus"},{name:"blur"}],slots:[{name:"prefix",scoped:!0,bindings:[{name:"tag",title:"binding"}]}]};export{me as _};
//# sourceMappingURL=index-75303fd2.js.map
