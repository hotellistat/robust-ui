{"version":3,"file":"index.69ea4b18.js","sources":["../../src/components/Img/index.ts"],"sourcesContent":["import { defineComponent, h, onMounted, ref } from 'vue'\nimport RobustSpinner from '../Spinner/index.vue'\nimport { PhWarning } from '@dnlsndr/vue-phosphor-icons'\nexport default defineComponent({\n  name: 'RobustImg',\n\n  props: {\n    src: {\n      type: String,\n      required: true,\n    },\n    fallbackSrc: {\n      type: String,\n      default: undefined,\n    },\n  },\n\n  emits: ['loaded', 'error'],\n\n  setup(props, { emit }) {\n    const loading = ref(true)\n    const error = ref(false)\n\n    const image = new Image()\n\n    image.onload = () => {\n      emit('loaded', true)\n      loading.value = false\n    }\n\n    image.onerror = (e) => {\n      emit('error', e)\n      error.value = true\n      loading.value = false\n    }\n\n    onMounted(() => {\n      image.src = props.src\n    })\n\n    return {\n      error,\n      loading,\n    }\n  },\n\n  render() {\n    if (this.loading) {\n      return h(\n        'div',\n        {\n          class: 'flex items-center justify-center',\n        },\n        h(RobustSpinner, {\n          size: 24,\n          stroke: 2,\n        })\n      )\n    } else if (this.error) {\n      if (this.fallbackSrc) {\n        return h('img', {\n          src: this.fallbackSrc,\n        })\n      } else {\n        return h(PhWarning, {\n          size: 20,\n        })\n      }\n    } else {\n      return h('img', {\n        src: this.src,\n      })\n    }\n  },\n})\n"],"names":["Img","defineComponent","props","emit","loading","ref","error","image","e","onMounted","h","RobustSpinner","PhWarning"],"mappings":"oKAGA,MAAAA,EAAeC,EAAgB,CAC7B,KAAM,YAEN,MAAO,CACL,IAAK,CACH,KAAM,OACN,SAAU,EACZ,EACA,YAAa,CACX,KAAM,OACN,QAAS,MACX,CACF,EAEA,MAAO,CAAC,SAAU,OAAO,EAEzB,MAAMC,EAAO,CAAE,KAAAC,GAAQ,CACf,MAAAC,EAAUC,EAAI,EAAI,EAClBC,EAAQD,EAAI,EAAK,EAEjBE,EAAQ,IAAI,MAElB,OAAAA,EAAM,OAAS,IAAM,CACnBJ,EAAK,SAAU,EAAI,EACnBC,EAAQ,MAAQ,EAAA,EAGZG,EAAA,QAAWC,GAAM,CACrBL,EAAK,QAASK,CAAC,EACfF,EAAM,MAAQ,GACdF,EAAQ,MAAQ,EAAA,EAGlBK,EAAU,IAAM,CACdF,EAAM,IAAML,EAAM,GAAA,CACnB,EAEM,CACL,MAAAI,EACA,QAAAF,CAAA,CAEJ,EAEA,QAAS,CACP,OAAI,KAAK,QACAM,EACL,MACA,CACE,MAAO,kCACT,EACAA,EAAEC,EAAe,CACf,KAAM,GACN,OAAQ,CAAA,CACT,CAAA,EAEM,KAAK,MACV,KAAK,YACAD,EAAE,MAAO,CACd,IAAK,KAAK,WAAA,CACX,EAEMA,EAAEE,EAAW,CAClB,KAAM,EAAA,CACP,EAGIF,EAAE,MAAO,CACd,IAAK,KAAK,GAAA,CACX,CAEL,CACF,CAAC"}